{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@stimulus/core/dist/src/event_listener.js","webpack:///./node_modules/@stimulus/core/dist/src/dispatcher.js","webpack:///./node_modules/@stimulus/core/dist/src/action_descriptor.js","webpack:///./node_modules/@stimulus/core/dist/src/action.js","webpack:///./node_modules/@stimulus/core/dist/src/binding.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/element_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/attribute_observer.js","webpack:///./node_modules/@stimulus/multimap/dist/src/set_operations.js","webpack:///./node_modules/@stimulus/multimap/dist/src/multimap.js","webpack:///./node_modules/@stimulus/multimap/dist/src/indexed_multimap.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/token_list_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/value_list_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/binding_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/context.js","webpack:///./node_modules/@stimulus/core/dist/src/definition.js","webpack:///./node_modules/@stimulus/core/dist/src/module.js","webpack:///./node_modules/@stimulus/core/dist/src/data_map.js","webpack:///./node_modules/@stimulus/core/dist/src/selectors.js","webpack:///./node_modules/@stimulus/core/dist/src/target_set.js","webpack:///./node_modules/@stimulus/core/dist/src/scope.js","webpack:///./node_modules/@stimulus/core/dist/src/scope_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/router.js","webpack:///./node_modules/@stimulus/core/dist/src/schema.js","webpack:///./node_modules/@stimulus/core/dist/src/application.js","webpack:///./node_modules/@stimulus/core/dist/src/target_properties.js","webpack:///./node_modules/@stimulus/core/dist/src/controller.js","webpack:///./node_modules/turbolinks/dist/turbolinks.js","webpack:///./src/controllers sync \\.js$","webpack:///./src/controllers/hello_controller.js","webpack:///./src/index.js","webpack:///./node_modules/@stimulus/webpack-helpers/dist/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EventListener","eventTarget","eventName","this","unorderedBindings","Set","connect","addEventListener","disconnect","removeEventListener","bindingConnected","binding","add","bindingDisconnected","delete","handleEvent","event","extendedEvent","stopImmediatePropagation_1","stopImmediatePropagation","assign","immediatePropagationStopped","extendEvent","_i","_a","bindings","length","Array","from","sort","left","right","leftIndex","index","rightIndex","configurable","Dispatcher","application","eventListenerMaps","Map","started","start","eventListeners","forEach","eventListener","stop","values","reduce","listeners","map","concat","fetchEventListenerForBinding","handleError","error","message","detail","fetchEventListener","eventListenerMap","fetchEventListenerMapForEventTarget","createEventListener","set","descriptorPattern","Action","element","descriptor","tagName","toLowerCase","defaultEventNames","getDefaultEventNameForElement","identifier","methodName","forToken","token","descriptorString","content","matches","trim","match","eventTargetName","window","document","toString","eventNameSuffix","e","getAttribute","Error","Binding","context","action","willBeInvokedByEvent","invokeWithEvent","method","controller","target","Element","contains","scope","containsElement","ElementObserver","delegate","_this","elements","mutationObserver","MutationObserver","mutations","processMutations","observe","attributes","childList","subtree","refresh","takeRecords","matchElementsInTree","has","removeElement","_b","_c","addElement","mutations_1","mutation","processMutation","type","processAttributeChange","attributeName","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","node","elementAttributeChanged","matchElement","nodes","elementFromNode","processTree","elementIsActive","tree","processor","nodeType","Node","ELEMENT_NODE","isConnected","elementMatched","elementUnmatched","AttributeObserver","elementObserver","hasAttribute","querySelectorAll","selector","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","fetch","del","size","prune","extendStatics","Multimap","valuesByKey","hasKey","hasValue","some","getValuesForKey","getKeysForValue","filter","__extends","setPrototypeOf","__proto__","b","__","constructor","_super","IndexedMultimap","keysByValue","keys","TokenListObserver","attributeObserver","tokensByElement","tokensMatched","readTokensForElement","refreshTokensForElement","unmatchedTokens","matchedTokens","tokensUnmatched","tokens","tokenMatched","tokenUnmatched","previousTokens","currentTokens","firstDifferingIndex","Math","max","_","findIndex","tokensAreEqual","slice","tokenString","split","parseTokenString","ValueListObserver","tokenListObserver","parseResultsByToken","WeakMap","valuesByTokenByElement","fetchParseResultForToken","fetchValuesByTokenForElement","elementMatchedValue","elementUnmatchedValue","parseResult","parseToken","valuesByToken","parseValueForToken","BindingObserver","bindingsByAction","valueListObserver","actionAttribute","disconnectAllActions","schema","connectAction","disconnectAction","clear","Context","controllerConstructor","bindingObserver","dispatcher","initialize","parentElement","blessControllerConstructor","extend","bless","extendWithReflect","Controller","_newTarget","Reflect","construct","arguments","a","apply","Module","definition","blessDefinition","contextsByScope","connectedContexts","connectContextForScope","fetchContextForScope","disconnectContextForScope","DataMap","getFormattedKey","setAttribute","removeAttribute","replace","char","attributeValueContainsToken","TargetSet","targetName","find","targetNames","getSelectorForTargetNames","findElement","findAll","findAllElements","getSelectorForTargetName","join","targetDescriptor","targetAttribute","Scope","targets","data","head","tail","filterElements","closest","controllerSelector","controllerAttribute","ScopeObserver","scopesByIdentifierByElement","scopeReferenceCounts","scopesByIdentifier","fetchScopesByIdentifierForElement","referenceCount","scopeConnected","scopeDisconnected","Router","scopeObserver","modulesByIdentifier","contexts","loadDefinition","unloadIdentifier","connectModule","disconnectModule","getContextForElementAndIdentifier","defaultSchema","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","g","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","Application","documentElement","router","readyState","register","load","rest","definitions","isArray","unload","identifiers","getControllerForElementAndIdentifier","console","defineTargetProperties","ancestors","getPrototypeOf","getAncestorsForConstructor","getOwnTargetNamesForConstructor","getTargetNamesForConstructor","properties","charAt","toUpperCase","capitalize","Turbolinks","supported","history","pushState","requestAnimationFrame","visit","clearCache","setProgressBarDelay","copyObject","parentNode","defer","setTimeout","throttle","dispatch","u","cancelable","createEvent","initEvent","preventDefault","defaultPrevented","dispatchEvent","matchesSelector","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","uuid","floor","random","Location","createElement","href","absoluteURL","hash","requestURL","anchor","wrap","getOrigin","getPath","getPathComponents","getLastPathComponent","getExtension","isHTML","isPrefixedBy","isEqualTo","toCacheKey","toJSON","valueOf","HttpRequest","requestCanceled","requestTimedOut","requestFailed","requestLoaded","requestProgressed","url","referrer","createXHR","NETWORK_FAILURE","TIMEOUT_FAILURE","timeout","send","xhr","notifyApplicationBeforeRequestStart","setProgress","requestStarted","cancel","abort","lengthComputable","loaded","total","endRequest","status","requestCompletedWithResponse","responseText","getResponseHeader","failed","requestFailedWithStatusCode","notifyApplicationAfterRequestEnd","XMLHttpRequest","open","setRequestHeader","onprogress","onload","onerror","ontimeout","onabort","destroy","progress","requestFinished","ProgressBar","trickle","stylesheetElement","createStylesheetElement","progressElement","createProgressElement","defaultCSS","show","visible","installStylesheetElement","installProgressElement","startTrickling","hide","hiding","fadeProgressElement","uninstallProgressElement","stopTrickling","setValue","insertBefore","firstChild","style","width","opacity","removeChild","trickleInterval","setInterval","clearInterval","textContent","className","BrowserAdapter","showProgressBar","progressBar","visitProposedToLocationWithAction","startVisitToLocationWithAction","visitStarted","issueRequest","changeHistory","loadCachedSnapshot","visitRequestStarted","hasCachedSnapshot","showProgressBarAfterDelay","visitRequestProgressed","visitRequestCompleted","loadResponse","visitRequestFailedWithStatusCode","reload","visitRequestFinished","hideProgressBar","visitCompleted","followRedirect","pageInvalidated","progressBarTimeout","progressBarDelay","clearTimeout","location","History","onPageLoad","onPopState","update","shouldHandlePopState","state","turbolinks","restorationIdentifier","historyPoppedToLocationWithRestorationIdentifier","pageLoaded","pageIsLoaded","HeadDetails","outerHTML","tracked","fromHeadElement","childNodes","hasElementWithKey","getTrackedElementSignature","getScriptElementsNotInDetails","getElementsMatchingTypeNotInDetails","getStylesheetElementsNotInDetails","getProvisionalElements","getMetaValue","findMetaElementByName","Snapshot","headDetails","bodyElement","fromHTMLString","fromHTMLElement","innerHTML","querySelector","clone","cloneNode","getRootLocation","getSetting","getCacheControlValue","getElementForAnchor","getPermanentElements","getPermanentElementById","getPermanentElementsPresentInSnapshot","id","findFirstAutofocusableElement","hasAnchor","isPreviewable","isCacheable","isVisitable","Renderer","render","renderView","viewWillRender","newBody","viewRendered","invalidateView","viewInvalidated","createScriptElement","async","__super__","SnapshotRenderer","currentSnapshot","newSnapshot","isPreview","currentHeadDetails","newHeadDetails","currentBody","shouldRender","mergeHead","replaceBody","focusFirstAutofocusableElement","copyNewHeadStylesheetElements","copyNewHeadScriptElements","removeCurrentHeadProvisionalElements","copyNewHeadProvisionalElements","relocateCurrentBodyPermanentElements","activateNewBodyScriptElements","assignNewBody","replacePlaceholderElementsWithClonedPermanentElements","trackedElementsAreIdentical","getNewHeadStylesheetElements","appendChild","getNewHeadScriptElements","getCurrentHeadProvisionalElements","getNewHeadProvisionalElements","getCurrentBodyPermanentElements","permanentElement","getNewBodyScriptElements","focus","replaceChild","ErrorRenderer","newHead","replaceHeadAndBody","activateBodyScriptElements","getScriptElements","View","htmlElement","getSnapshot","snapshot","markAsPreview","renderSnapshot","renderError","ScrollManager","onScroll","scrollToElement","scrollIntoView","scrollToPosition","x","scrollTo","updatePosition","pageXOffset","pageYOffset","position","scrollPositionChanged","SnapshotCache","snapshots","read","touch","put","write","indexOf","splice","unshift","Visit","performScroll","adapter","timingMetrics","recordTimingMetric","request","cancelRender","complete","fail","visitFailed","historyChanged","shouldIssueRequest","getCachedSnapshot","getCachedSnapshotForLocation","cacheSnapshot","visitRendered","response","redirectedToLocation","followedRedirect","replaceHistoryWithLocationAndRestorationIdentifier","scrolled","scrollToRestoredPosition","scrollToTop","scrollToAnchor","restorationData","scrollPosition","Date","getTime","getTimingMetrics","snapshotCached","frame","cancelAnimationFrame","clickBubbled","clickCaptured","view","scrollManager","startHistory","enabled","disable","stopHistory","cache","applicationAllowsVisitingLocation","locationIsVisitable","getRestorationDataForIdentifier","startVisit","pushHistoryWithLocationAndRestorationIdentifier","shouldCacheSnapshot","notifyApplicationBeforeCachingSnapshot","lastRenderedLocation","getCurrentRestorationData","notifyApplicationBeforeRender","currentVisit","notifyApplicationAfterRender","notifyApplicationAfterPageLoad","clickEventIsSignificant","getVisitableLinkForNode","getVisitableLocationForLink","applicationAllowsFollowingLinkToLocation","getActionForLink","notifyApplicationAfterClickingLinkToLocation","notifyApplicationBeforeVisitingLocation","notifyApplicationAfterVisitingLocation","timing","createVisit","isContentEditable","which","altKey","ctrlKey","metaKey","shiftKey","nodeIsVisitable","currentScript","warn","webpackContext","req","webpackContextResolve","code","log","outputTarget","nameTarget","require","logicalName","identifierForContextKey","default","definitionForModuleAndIdentifier","definitionForModuleWithContextAndKey","definitionsFromContext"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","var EventListener = /** @class */ (function () {\n    function EventListener(eventTarget, eventName) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.unorderedBindings = new Set;\n    }\n    EventListener.prototype.connect = function () {\n        this.eventTarget.addEventListener(this.eventName, this, false);\n    };\n    EventListener.prototype.disconnect = function () {\n        this.eventTarget.removeEventListener(this.eventName, this, false);\n    };\n    // Binding observer delegate\n    /** @hidden */\n    EventListener.prototype.bindingConnected = function (binding) {\n        this.unorderedBindings.add(binding);\n    };\n    /** @hidden */\n    EventListener.prototype.bindingDisconnected = function (binding) {\n        this.unorderedBindings.delete(binding);\n    };\n    EventListener.prototype.handleEvent = function (event) {\n        var extendedEvent = extendEvent(event);\n        for (var _i = 0, _a = this.bindings; _i < _a.length; _i++) {\n            var binding = _a[_i];\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    };\n    Object.defineProperty(EventListener.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.unorderedBindings).sort(function (left, right) {\n                var leftIndex = left.index, rightIndex = right.index;\n                return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventListener;\n}());\nexport { EventListener };\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        var stopImmediatePropagation_1 = event.stopImmediatePropagation;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation: function () {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation_1.call(this);\n            }\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRfbGlzdGVuZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXZlbnRfbGlzdGVuZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFLRSx1QkFBWSxXQUF3QixFQUFFLFNBQWlCO1FBQ3JELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1FBQzFCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsK0JBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDaEUsQ0FBQztJQUVELGtDQUFVLEdBQVY7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25FLENBQUM7SUFFRCw0QkFBNEI7SUFFNUIsY0FBYztJQUNkLHdDQUFnQixHQUFoQixVQUFpQixPQUFnQjtRQUMvQixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3JDLENBQUM7SUFFRCxjQUFjO0lBQ2QsMkNBQW1CLEdBQW5CLFVBQW9CLE9BQWdCO1FBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDeEMsQ0FBQztJQUVELG1DQUFXLEdBQVgsVUFBWSxLQUFZO1FBQ3RCLElBQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUN4QyxLQUFzQixVQUFhLEVBQWIsS0FBQSxJQUFJLENBQUMsUUFBUSxFQUFiLGNBQWEsRUFBYixJQUFhLEVBQUU7WUFBaEMsSUFBTSxPQUFPLFNBQUE7WUFDaEIsSUFBSSxhQUFhLENBQUMsMkJBQTJCLEVBQUU7Z0JBQzdDLE1BQUs7YUFDTjtpQkFBTTtnQkFDTCxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFBO2FBQ25DO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsc0JBQUksbUNBQVE7YUFBWjtZQUNFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJLEVBQUUsS0FBSztnQkFDekQsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQTtnQkFDdEQsT0FBTyxTQUFTLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDckUsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDOzs7T0FBQTtJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQWhERCxJQWdEQzs7QUFFRCxxQkFBcUIsS0FBWTtJQUMvQixJQUFJLDZCQUE2QixJQUFJLEtBQUssRUFBRTtRQUMxQyxPQUFPLEtBQUssQ0FBQTtLQUNiO1NBQU07UUFDRyxJQUFBLDJEQUF3QixDQUFVO1FBQzFDLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDMUIsMkJBQTJCLEVBQUUsS0FBSztZQUNsQyx3QkFBd0I7Z0JBQ3RCLElBQUksQ0FBQywyQkFBMkIsR0FBRyxJQUFJLENBQUE7Z0JBQ3ZDLDBCQUF3QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNyQyxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0tBQ0g7QUFDSCxDQUFDIn0=","import { EventListener } from \"./event_listener\";\nvar Dispatcher = /** @class */ (function () {\n    function Dispatcher(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map;\n        this.started = false;\n    }\n    Dispatcher.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.connect(); });\n        }\n    };\n    Dispatcher.prototype.stop = function () {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.disconnect(); });\n        }\n    };\n    Object.defineProperty(Dispatcher.prototype, \"eventListeners\", {\n        get: function () {\n            return Array.from(this.eventListenerMaps.values())\n                .reduce(function (listeners, map) { return listeners.concat(Array.from(map.values())); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Binding observer delegate\n    /** @hidden */\n    Dispatcher.prototype.bindingConnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    };\n    /** @hidden */\n    Dispatcher.prototype.bindingDisconnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n    };\n    // Error handling\n    Dispatcher.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    Dispatcher.prototype.fetchEventListenerForBinding = function (binding) {\n        var eventTarget = binding.eventTarget, eventName = binding.eventName;\n        return this.fetchEventListener(eventTarget, eventName);\n    };\n    Dispatcher.prototype.fetchEventListener = function (eventTarget, eventName) {\n        var eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        var eventListener = eventListenerMap.get(eventName);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName);\n            eventListenerMap.set(eventName, eventListener);\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.createEventListener = function (eventTarget, eventName) {\n        var eventListener = new EventListener(eventTarget, eventName);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.fetchEventListenerMapForEventTarget = function (eventTarget) {\n        var eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map;\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    };\n    return Dispatcher;\n}());\nexport { Dispatcher };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzcGF0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaXNwYXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUVoRDtJQUtFLG9CQUFZLFdBQXdCO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtRQUNoQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUN0QixDQUFDO0lBRUQsMEJBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQUEsYUFBYSxJQUFJLE9BQUEsYUFBYSxDQUFDLE9BQU8sRUFBRSxFQUF2QixDQUF1QixDQUFDLENBQUE7U0FDdEU7SUFDSCxDQUFDO0lBRUQseUJBQUksR0FBSjtRQUNFLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUNwQixJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxVQUFBLGFBQWEsSUFBSSxPQUFBLGFBQWEsQ0FBQyxVQUFVLEVBQUUsRUFBMUIsQ0FBMEIsQ0FBQyxDQUFBO1NBQ3pFO0lBQ0gsQ0FBQztJQUVELHNCQUFJLHNDQUFjO2FBQWxCO1lBQ0UsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztpQkFDL0MsTUFBTSxDQUFDLFVBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSyxPQUFBLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUExQyxDQUEwQyxFQUFFLEVBQXFCLENBQUMsQ0FBQTtRQUNsRyxDQUFDOzs7T0FBQTtJQUVELDRCQUE0QjtJQUU1QixjQUFjO0lBQ2QscUNBQWdCLEdBQWhCLFVBQWlCLE9BQWdCO1FBQy9CLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN0RSxDQUFDO0lBRUQsY0FBYztJQUNkLHdDQUFtQixHQUFuQixVQUFvQixPQUFnQjtRQUNsQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDekUsQ0FBQztJQUVELGlCQUFpQjtJQUVqQixnQ0FBVyxHQUFYLFVBQVksS0FBWSxFQUFFLE9BQWUsRUFBRSxNQUFtQjtRQUFuQix1QkFBQSxFQUFBLFdBQW1CO1FBQzVELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxXQUFTLE9BQVMsRUFBRSxNQUFNLENBQUMsQ0FBQTtJQUNqRSxDQUFDO0lBRU8saURBQTRCLEdBQXBDLFVBQXFDLE9BQWdCO1FBQzNDLElBQUEsaUNBQVcsRUFBRSw2QkFBUyxDQUFZO1FBQzFDLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQTtJQUN4RCxDQUFDO0lBRU8sdUNBQWtCLEdBQTFCLFVBQTJCLFdBQXdCLEVBQUUsU0FBaUI7UUFDcEUsSUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsbUNBQW1DLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDOUUsSUFBSSxhQUFhLEdBQUcsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ25ELElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDbEIsYUFBYSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUE7WUFDaEUsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUMvQztRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyx3Q0FBbUIsR0FBM0IsVUFBNEIsV0FBd0IsRUFBRSxTQUFpQjtRQUNyRSxJQUFNLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUE7UUFDL0QsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtTQUN4QjtRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyx3REFBbUMsR0FBM0MsVUFBNEMsV0FBd0I7UUFDbEUsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzlELElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNyQixnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQTtZQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO1NBQzFEO1FBQ0QsT0FBTyxnQkFBZ0IsQ0FBQTtJQUN6QixDQUFDO0lBQ0gsaUJBQUM7QUFBRCxDQUFDLEFBL0VELElBK0VDIn0=","// capture nos.:            12   23 4               43   1 5   56 7  76\nvar descriptorPattern = /^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;\nexport function parseDescriptorString(descriptorString) {\n    var source = descriptorString.trim();\n    var matches = source.match(descriptorPattern) || [];\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName: matches[2],\n        identifier: matches[5],\n        methodName: matches[7]\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nexport function stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uX2Rlc2NyaXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYWN0aW9uX2Rlc2NyaXB0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0EsdUVBQXVFO0FBQ3ZFLElBQU0saUJBQWlCLEdBQUcsZ0RBQWdELENBQUE7QUFFMUUsTUFBTSxnQ0FBZ0MsZ0JBQXdCO0lBQzVELElBQU0sTUFBTSxHQUFHLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQ3RDLElBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDckQsT0FBTztRQUNMLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsU0FBUyxFQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsVUFBVSxFQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsVUFBVSxFQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDeEIsQ0FBQTtBQUNILENBQUM7QUFFRCwwQkFBMEIsZUFBdUI7SUFDL0MsSUFBSSxlQUFlLElBQUksUUFBUSxFQUFFO1FBQy9CLE9BQU8sTUFBTSxDQUFBO0tBQ2Q7U0FBTSxJQUFJLGVBQWUsSUFBSSxVQUFVLEVBQUU7UUFDeEMsT0FBTyxRQUFRLENBQUE7S0FDaEI7QUFDSCxDQUFDO0FBRUQsTUFBTSwrQkFBK0IsV0FBd0I7SUFDM0QsSUFBSSxXQUFXLElBQUksTUFBTSxFQUFFO1FBQ3pCLE9BQU8sUUFBUSxDQUFBO0tBQ2hCO1NBQU0sSUFBSSxXQUFXLElBQUksUUFBUSxFQUFFO1FBQ2xDLE9BQU8sVUFBVSxDQUFBO0tBQ2xCO0FBQ0gsQ0FBQyJ9","import { parseDescriptorString, stringifyEventTarget } from \"./action_descriptor\";\nvar Action = /** @class */ (function () {\n    function Action(element, index, descriptor) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n    }\n    Action.forToken = function (token) {\n        return new this(token.element, token.index, parseDescriptorString(token.content));\n    };\n    Action.prototype.toString = function () {\n        var eventNameSuffix = this.eventTargetName ? \"@\" + this.eventTargetName : \"\";\n        return \"\" + this.eventName + eventNameSuffix + \"->\" + this.identifier + \"#\" + this.methodName;\n    };\n    Object.defineProperty(Action.prototype, \"eventTargetName\", {\n        get: function () {\n            return stringifyEventTarget(this.eventTarget);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Action;\n}());\nexport { Action };\nvar defaultEventNames = {\n    \"a\": function (e) { return \"click\"; },\n    \"button\": function (e) { return \"click\"; },\n    \"form\": function (e) { return \"submit\"; },\n    \"input\": function (e) { return e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"change\"; },\n    \"select\": function (e) { return \"change\"; },\n    \"textarea\": function (e) { return \"change\"; }\n};\nexport function getDefaultEventNameForElement(element) {\n    var tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2FjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9CLHFCQUFxQixFQUFFLG9CQUFvQixFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFHbkc7SUFZRSxnQkFBWSxPQUFnQixFQUFFLEtBQWEsRUFBRSxVQUFxQztRQUNoRixJQUFJLENBQUMsT0FBTyxHQUFPLE9BQU8sQ0FBQTtRQUMxQixJQUFJLENBQUMsS0FBSyxHQUFTLEtBQUssQ0FBQTtRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFBO1FBQ3BELElBQUksQ0FBQyxTQUFTLEdBQUssVUFBVSxDQUFDLFNBQVMsSUFBSSw2QkFBNkIsQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtRQUNoSCxJQUFJLENBQUMsVUFBVSxHQUFJLFVBQVUsQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLFVBQVUsR0FBSSxVQUFVLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQzFFLENBQUM7SUFYTSxlQUFRLEdBQWYsVUFBZ0IsS0FBWTtRQUMxQixPQUFPLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtJQUNuRixDQUFDO0lBV0QseUJBQVEsR0FBUjtRQUNFLElBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQUksSUFBSSxDQUFDLGVBQWlCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUM5RSxPQUFPLEtBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxlQUFlLFVBQUssSUFBSSxDQUFDLFVBQVUsU0FBSSxJQUFJLENBQUMsVUFBWSxDQUFBO0lBQ3JGLENBQUM7SUFFRCxzQkFBWSxtQ0FBZTthQUEzQjtZQUNFLE9BQU8sb0JBQW9CLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQy9DLENBQUM7OztPQUFBO0lBQ0gsYUFBQztBQUFELENBQUMsQUE3QkQsSUE2QkM7O0FBRUQsSUFBTSxpQkFBaUIsR0FBd0Q7SUFDN0UsR0FBRyxFQUFTLFVBQUEsQ0FBQyxJQUFJLE9BQUEsT0FBTyxFQUFQLENBQU87SUFDeEIsUUFBUSxFQUFJLFVBQUEsQ0FBQyxJQUFJLE9BQUEsT0FBTyxFQUFQLENBQU87SUFDeEIsTUFBTSxFQUFNLFVBQUEsQ0FBQyxJQUFJLE9BQUEsUUFBUSxFQUFSLENBQVE7SUFDekIsT0FBTyxFQUFLLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUF2RCxDQUF1RDtJQUN4RSxRQUFRLEVBQUksVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLEVBQVIsQ0FBUTtJQUN6QixVQUFVLEVBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLEVBQVIsQ0FBUTtDQUMxQixDQUFBO0FBRUQsTUFBTSx3Q0FBd0MsT0FBZ0I7SUFDNUQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtJQUM3QyxJQUFJLE9BQU8sSUFBSSxpQkFBaUIsRUFBRTtRQUNoQyxPQUFPLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0tBQzNDO0FBQ0gsQ0FBQztBQUVELGVBQWUsT0FBZTtJQUM1QixNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQzFCLENBQUMifQ==","var Binding = /** @class */ (function () {\n    function Binding(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    Object.defineProperty(Binding.prototype, \"index\", {\n        get: function () {\n            return this.action.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"eventTarget\", {\n        get: function () {\n            return this.action.eventTarget;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Binding.prototype.handleEvent = function (event) {\n        if (this.willBeInvokedByEvent(event)) {\n            this.invokeWithEvent(event);\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"eventName\", {\n        get: function () {\n            return this.action.eventName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"method\", {\n        get: function () {\n            var method = this.controller[this.methodName];\n            if (typeof method == \"function\") {\n                return method;\n            }\n            throw new Error(\"Action \\\"\" + this.action + \"\\\" references undefined method \\\"\" + this.methodName + \"\\\"\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Binding.prototype.invokeWithEvent = function (event) {\n        try {\n            this.method.call(this.controller, event);\n        }\n        catch (error) {\n            var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element, index = _a.index;\n            var detail = { identifier: identifier, controller: controller, element: element, index: index, event: event };\n            this.context.handleError(error, \"invoking action \\\"\" + this.action + \"\\\"\", detail);\n        }\n    };\n    Binding.prototype.willBeInvokedByEvent = function (event) {\n        var eventTarget = event.target;\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return true;\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"controller\", {\n        get: function () {\n            return this.context.controller;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"methodName\", {\n        get: function () {\n            return this.action.methodName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Binding;\n}());\nexport { Binding };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW5kaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBO0lBSUUsaUJBQVksT0FBZ0IsRUFBRSxNQUFjO1FBQzFDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0lBQ3RCLENBQUM7SUFFRCxzQkFBSSwwQkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBVyxHQUFYLFVBQVksS0FBWTtRQUN0QixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNwQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQzVCO0lBQ0gsQ0FBQztJQUVELHNCQUFJLDhCQUFTO2FBQWI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU07YUFBVjtZQUNFLElBQU0sTUFBTSxHQUFJLElBQUksQ0FBQyxVQUFrQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUN4RCxJQUFJLE9BQU8sTUFBTSxJQUFJLFVBQVUsRUFBRTtnQkFDL0IsT0FBTyxNQUFNLENBQUE7YUFDZDtZQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsY0FBVyxJQUFJLENBQUMsTUFBTSx5Q0FBa0MsSUFBSSxDQUFDLFVBQVUsT0FBRyxDQUFDLENBQUE7UUFDN0YsQ0FBQzs7O09BQUE7SUFFTyxpQ0FBZSxHQUF2QixVQUF3QixLQUFZO1FBQ2xDLElBQUk7WUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQ3pDO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDUixJQUFBLFNBQWlELEVBQS9DLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxvQkFBTyxFQUFFLGdCQUFLLENBQVM7WUFDdkQsSUFBTSxNQUFNLEdBQUcsRUFBRSxVQUFVLFlBQUEsRUFBRSxVQUFVLFlBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFBO1lBQ2hFLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBb0IsSUFBSSxDQUFDLE1BQU0sT0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO1NBQzVFO0lBQ0gsQ0FBQztJQUVPLHNDQUFvQixHQUE1QixVQUE2QixLQUFZO1FBQ3ZDLElBQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUE7UUFDaEMsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFdBQVcsRUFBRTtZQUNoQyxPQUFPLElBQUksQ0FBQTtTQUNaO2FBQU0sSUFBSSxXQUFXLFlBQVksT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQy9FLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUE7U0FDL0M7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFBO1NBQ1o7SUFDSCxDQUFDO0lBRUQsc0JBQVksK0JBQVU7YUFBdEI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQVksK0JBQVU7YUFBdEI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFBO1FBQy9CLENBQUM7OztPQUFBO0lBRUQsc0JBQVksNEJBQU87YUFBbkI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQVksMEJBQUs7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBQ0gsY0FBQztBQUFELENBQUMsQUEzRUQsSUEyRUMifQ==","var ElementObserver = /** @class */ (function () {\n    function ElementObserver(element, delegate) {\n        var _this = this;\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set;\n        this.mutationObserver = new MutationObserver(function (mutations) { return _this.processMutations(mutations); });\n    }\n    ElementObserver.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, childList: true, subtree: true });\n            this.refresh();\n        }\n    };\n    ElementObserver.prototype.stop = function () {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    };\n    ElementObserver.prototype.refresh = function () {\n        if (this.started) {\n            var matches = new Set(this.matchElementsInTree());\n            for (var _i = 0, _a = Array.from(this.elements); _i < _a.length; _i++) {\n                var element = _a[_i];\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (var _b = 0, _c = Array.from(matches); _b < _c.length; _b++) {\n                var element = _c[_b];\n                this.addElement(element);\n            }\n        }\n    };\n    // Mutation record processing\n    ElementObserver.prototype.processMutations = function (mutations) {\n        if (this.started) {\n            for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n                var mutation = mutations_1[_i];\n                this.processMutation(mutation);\n            }\n        }\n    };\n    ElementObserver.prototype.processMutation = function (mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    };\n    ElementObserver.prototype.processAttributeChange = function (node, attributeName) {\n        var element = node;\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    };\n    ElementObserver.prototype.processRemovedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    };\n    ElementObserver.prototype.processAddedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    };\n    // Element matching\n    ElementObserver.prototype.matchElement = function (element) {\n        return this.delegate.matchElement(element);\n    };\n    ElementObserver.prototype.matchElementsInTree = function (tree) {\n        if (tree === void 0) { tree = this.element; }\n        return this.delegate.matchElementsInTree(tree);\n    };\n    ElementObserver.prototype.processTree = function (tree, processor) {\n        for (var _i = 0, _a = this.matchElementsInTree(tree); _i < _a.length; _i++) {\n            var element = _a[_i];\n            processor.call(this, element);\n        }\n    };\n    ElementObserver.prototype.elementFromNode = function (node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    };\n    ElementObserver.prototype.elementIsActive = function (element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    };\n    // Element tracking\n    ElementObserver.prototype.addElement = function (element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    };\n    ElementObserver.prototype.removeElement = function (element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    };\n    return ElementObserver;\n}());\nexport { ElementObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxlbWVudF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbGVtZW50X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVNBO0lBUUUseUJBQVksT0FBZ0IsRUFBRSxRQUFpQztRQUEvRCxpQkFPQztRQU5DLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUE7UUFDdkIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksZ0JBQWdCLENBQUMsVUFBQyxTQUFTLElBQUssT0FBQSxLQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEVBQWhDLENBQWdDLENBQUMsQ0FBQTtJQUMvRixDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtZQUNqRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7U0FDZjtJQUNILENBQUM7SUFFRCw4QkFBSSxHQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUNuQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUE7WUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7U0FDckI7SUFDSCxDQUFDO0lB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","import { ElementObserver } from \"./element_observer\";\nvar AttributeObserver = /** @class */ (function () {\n    function AttributeObserver(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    Object.defineProperty(AttributeObserver.prototype, \"element\", {\n        get: function () {\n            return this.elementObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttributeObserver.prototype, \"selector\", {\n        get: function () {\n            return \"[\" + this.attributeName + \"]\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AttributeObserver.prototype.start = function () {\n        this.elementObserver.start();\n    };\n    AttributeObserver.prototype.stop = function () {\n        this.elementObserver.stop();\n    };\n    AttributeObserver.prototype.refresh = function () {\n        this.elementObserver.refresh();\n    };\n    Object.defineProperty(AttributeObserver.prototype, \"started\", {\n        get: function () {\n            return this.elementObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Element observer delegate\n    AttributeObserver.prototype.matchElement = function (element) {\n        return element.hasAttribute(this.attributeName);\n    };\n    AttributeObserver.prototype.matchElementsInTree = function (tree) {\n        var match = this.matchElement(tree) ? [tree] : [];\n        var matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    };\n    AttributeObserver.prototype.elementMatched = function (element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementUnmatched = function (element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementAttributeChanged = function (element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    };\n    return AttributeObserver;\n}());\nexport { AttributeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0cmlidXRlX29ic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F0dHJpYnV0ZV9vYnNlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUEyQixNQUFNLG9CQUFvQixDQUFBO0FBUTdFO0lBTUUsMkJBQVksT0FBZ0IsRUFBRSxhQUFxQixFQUFFLFFBQW1DO1FBQ3RGLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxlQUFlLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQTtRQUNyQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFRO2FBQVo7WUFDRSxPQUFPLE1BQUksSUFBSSxDQUFDLGFBQWEsTUFBRyxDQUFBO1FBQ2xDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDOUIsQ0FBQztJQUVELGdDQUFJLEdBQUo7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzdCLENBQUM7SUFFRCxtQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUE7UUFDckMsQ0FBQzs7O09BQUE7SUFFRCw0QkFBNEI7SUFFNUIsd0NBQVksR0FBWixVQUFhLE9BQWdCO1FBQzNCLE9BQU8sT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDakQsQ0FBQztJQUVELCtDQUFtQixHQUFuQixVQUFvQixJQUFhO1FBQy9CLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUNuRCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQTtRQUNoRSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDOUIsQ0FBQztJQUVELDBDQUFjLEdBQWQsVUFBZSxPQUFnQjtRQUM3QixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLEVBQUU7WUFDekMsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQ25FO0lBQ0gsQ0FBQztJQUVELDRDQUFnQixHQUFoQixVQUFpQixPQUFnQjtRQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMseUJBQXlCLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQ3JFO0lBQ0gsQ0FBQztJQUVELG1EQUF1QixHQUF2QixVQUF3QixPQUFnQixFQUFFLGFBQXFCO1FBQzdELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyw0QkFBNEIsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLGFBQWEsRUFBRTtZQUNyRixJQUFJLENBQUMsUUFBUSxDQUFDLDRCQUE0QixDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUNuRTtJQUNILENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFsRUQsSUFrRUMifQ==","export function add(map, key, value) {\n    fetch(map, key).add(value);\n}\nexport function del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nexport function fetch(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nexport function prune(map, key) {\n    var values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0X29wZXJhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2V0X29wZXJhdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxjQUFvQixHQUFtQixFQUFFLEdBQU0sRUFBRSxLQUFRO0lBQzdELEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzVCLENBQUM7QUFFRCxNQUFNLGNBQW9CLEdBQW1CLEVBQUUsR0FBTSxFQUFFLEtBQVE7SUFDN0QsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDN0IsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUNqQixDQUFDO0FBRUQsTUFBTSxnQkFBc0IsR0FBbUIsRUFBRSxHQUFNO0lBQ3JELElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDekIsSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNYLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQ2xCLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0tBQ3JCO0lBQ0QsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDO0FBRUQsTUFBTSxnQkFBc0IsR0FBbUIsRUFBRSxHQUFNO0lBQ3JELElBQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDM0IsSUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO1FBQ3RDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7S0FDaEI7QUFDSCxDQUFDIn0=","import { add, del } from \"./set_operations\";\nvar Multimap = /** @class */ (function () {\n    function Multimap() {\n        this.valuesByKey = new Map();\n    }\n    Object.defineProperty(Multimap.prototype, \"values\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (values, set) { return values.concat(Array.from(set)); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Multimap.prototype, \"size\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (size, set) { return size + set.size; }, 0);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Multimap.prototype.add = function (key, value) {\n        add(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.delete = function (key, value) {\n        del(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.has = function (key, value) {\n        var values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    };\n    Multimap.prototype.hasKey = function (key) {\n        return this.valuesByKey.has(key);\n    };\n    Multimap.prototype.hasValue = function (value) {\n        var sets = Array.from(this.valuesByKey.values());\n        return sets.some(function (set) { return set.has(value); });\n    };\n    Multimap.prototype.getValuesForKey = function (key) {\n        var values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    };\n    Multimap.prototype.getKeysForValue = function (value) {\n        return Array.from(this.valuesByKey)\n            .filter(function (_a) {\n            var key = _a[0], values = _a[1];\n            return values.has(value);\n        })\n            .map(function (_a) {\n            var key = _a[0], values = _a[1];\n            return key;\n        });\n    };\n    return Multimap;\n}());\nexport { Multimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGltYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbXVsdGltYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUUzQztJQUdFO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBYSxDQUFBO0lBQ3pDLENBQUM7SUFFRCxzQkFBSSw0QkFBTTthQUFWO1lBQ0UsSUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7WUFDbEQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSyxPQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUE5QixDQUE4QixFQUFRLEVBQUUsQ0FBQyxDQUFBO1FBQy9FLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMEJBQUk7YUFBUjtZQUNFLElBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQ2xELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFDLElBQUksRUFBRSxHQUFHLElBQUssT0FBQSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBZixDQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDdkQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCx5QkFBTSxHQUFOLFVBQU8sR0FBTSxFQUFFLEtBQVE7UUFDckIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCxzQkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEMsT0FBTyxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDNUMsQ0FBQztJQUVELHlCQUFNLEdBQU4sVUFBTyxHQUFNO1FBQ1gsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsMkJBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixJQUFNLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUNsRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxHQUFHLElBQUksT0FBQSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFkLENBQWMsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCxrQ0FBZSxHQUFmLFVBQWdCLEdBQU07UUFDcEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEMsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUN6QyxDQUFDO0lBRUQsa0NBQWUsR0FBZixVQUFnQixLQUFRO1FBQ3RCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hDLE1BQU0sQ0FBQyxVQUFDLEVBQWE7Z0JBQVosV0FBRyxFQUFFLGNBQU07WUFBTSxPQUFBLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQWpCLENBQWlCLENBQUM7YUFDNUMsR0FBRyxDQUFDLFVBQUMsRUFBYTtnQkFBWixXQUFHLEVBQUUsY0FBTTtZQUFNLE9BQUEsR0FBRztRQUFILENBQUcsQ0FBQyxDQUFBO0lBQ2hDLENBQUM7SUFDSCxlQUFDO0FBQUQsQ0FBQyxBQWpERCxJQWlEQyJ9","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Multimap } from \"./multimap\";\nimport { add, del } from \"./set_operations\";\nvar IndexedMultimap = /** @class */ (function (_super) {\n    __extends(IndexedMultimap, _super);\n    function IndexedMultimap() {\n        var _this = _super.call(this) || this;\n        _this.keysByValue = new Map;\n        return _this;\n    }\n    Object.defineProperty(IndexedMultimap.prototype, \"values\", {\n        get: function () {\n            return Array.from(this.keysByValue.keys());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    IndexedMultimap.prototype.add = function (key, value) {\n        _super.prototype.add.call(this, key, value);\n        add(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.delete = function (key, value) {\n        _super.prototype.delete.call(this, key, value);\n        del(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.hasValue = function (value) {\n        return this.keysByValue.has(value);\n    };\n    IndexedMultimap.prototype.getKeysForValue = function (value) {\n        var set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    };\n    return IndexedMultimap;\n}(Multimap));\nexport { IndexedMultimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXhlZF9tdWx0aW1hcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleGVkX211bHRpbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBQ3JDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFM0M7SUFBMkMsbUNBQWM7SUFHdkQ7UUFBQSxZQUNFLGlCQUFPLFNBRVI7UUFEQyxLQUFJLENBQUMsV0FBVyxHQUFHLElBQUksR0FBRyxDQUFBOztJQUM1QixDQUFDO0lBRUQsc0JBQUksbUNBQU07YUFBVjtZQUNFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDNUMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsaUJBQU0sR0FBRyxZQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNyQixHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELGdDQUFNLEdBQU4sVUFBTyxHQUFNLEVBQUUsS0FBUTtRQUNyQixpQkFBTSxNQUFNLFlBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRUQsa0NBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQ3BDLENBQUM7SUFFRCx5Q0FBZSxHQUFmLFVBQWdCLEtBQVE7UUFDdEIsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDdkMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUNuQyxDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQUFDLEFBOUJELENBQTJDLFFBQVEsR0E4QmxEIn0=","import { AttributeObserver } from \"./attribute_observer\";\nimport { Multimap } from \"@stimulus/multimap\";\nvar TokenListObserver = /** @class */ (function () {\n    function TokenListObserver(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap;\n    }\n    Object.defineProperty(TokenListObserver.prototype, \"started\", {\n        get: function () {\n            return this.attributeObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TokenListObserver.prototype.start = function () {\n        this.attributeObserver.start();\n    };\n    TokenListObserver.prototype.stop = function () {\n        this.attributeObserver.stop();\n    };\n    TokenListObserver.prototype.refresh = function () {\n        this.attributeObserver.refresh();\n    };\n    Object.defineProperty(TokenListObserver.prototype, \"element\", {\n        get: function () {\n            return this.attributeObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TokenListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.attributeObserver.attributeName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Attribute observer delegate\n    TokenListObserver.prototype.elementMatchedAttribute = function (element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    };\n    TokenListObserver.prototype.elementAttributeValueChanged = function (element) {\n        var _a = this.refreshTokensForElement(element), unmatchedTokens = _a[0], matchedTokens = _a[1];\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    };\n    TokenListObserver.prototype.elementUnmatchedAttribute = function (element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    };\n    TokenListObserver.prototype.tokensMatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenMatched(token); });\n    };\n    TokenListObserver.prototype.tokensUnmatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenUnmatched(token); });\n    };\n    TokenListObserver.prototype.tokenMatched = function (token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    };\n    TokenListObserver.prototype.tokenUnmatched = function (token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    };\n    TokenListObserver.prototype.refreshTokensForElement = function (element) {\n        var previousTokens = this.tokensByElement.getValuesForKey(element);\n        var currentTokens = this.readTokensForElement(element);\n        var firstDifferingIndex = zip(previousTokens, currentTokens)\n            .findIndex(function (_a) {\n            var previousToken = _a[0], currentToken = _a[1];\n            return !tokensAreEqual(previousToken, currentToken);\n        });\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    };\n    TokenListObserver.prototype.readTokensForElement = function (element) {\n        var attributeName = this.attributeName;\n        var tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    };\n    return TokenListObserver;\n}());\nexport { TokenListObserver };\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString.trim().split(/\\s+/).filter(function (content) { return content.length; })\n        .map(function (content, index) { return ({ element: element, attributeName: attributeName, content: content, index: index }); });\n}\nfunction zip(left, right) {\n    var length = Math.max(left.length, right.length);\n    return Array.from({ length: length }, function (_, index) { return [left[index], right[index]]; });\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5fbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90b2tlbl9saXN0X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBNkIsTUFBTSxzQkFBc0IsQ0FBQTtBQUNuRixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUE7QUFjN0M7SUFLRSwyQkFBWSxPQUFnQixFQUFFLGFBQXFCLEVBQUUsUUFBbUM7UUFDdEYsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksUUFBUSxDQUFBO0lBQ3JDLENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFBO1FBQ3ZDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsZ0NBQUksR0FBSjtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRUQsbUNBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQTtRQUN2QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRDQUFhO2FBQWpCO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFBO1FBQzdDLENBQUM7OztPQUFBO0lBRUQsOEJBQThCO0lB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","import { TokenListObserver } from \"./token_list_observer\";\nvar ValueListObserver = /** @class */ (function () {\n    function ValueListObserver(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap;\n        this.valuesByTokenByElement = new WeakMap;\n    }\n    Object.defineProperty(ValueListObserver.prototype, \"started\", {\n        get: function () {\n            return this.tokenListObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValueListObserver.prototype.start = function () {\n        this.tokenListObserver.start();\n    };\n    ValueListObserver.prototype.stop = function () {\n        this.tokenListObserver.stop();\n    };\n    ValueListObserver.prototype.refresh = function () {\n        this.tokenListObserver.refresh();\n    };\n    Object.defineProperty(ValueListObserver.prototype, \"element\", {\n        get: function () {\n            return this.tokenListObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ValueListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.tokenListObserver.attributeName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValueListObserver.prototype.tokenMatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.tokenUnmatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.fetchParseResultForToken = function (token) {\n        var parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    };\n    ValueListObserver.prototype.fetchValuesByTokenForElement = function (element) {\n        var valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map;\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    };\n    ValueListObserver.prototype.parseToken = function (token) {\n        try {\n            var value = this.delegate.parseValueForToken(token);\n            return { value: value };\n        }\n        catch (error) {\n            return { error: error };\n        }\n    };\n    return ValueListObserver;\n}());\nexport { ValueListObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsdWVfbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWx1ZV9saXN0X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBUyxpQkFBaUIsRUFBNkIsTUFBTSx1QkFBdUIsQ0FBQTtBQWEzRjtJQU1FLDJCQUFZLE9BQWdCLEVBQUUsYUFBcUIsRUFBRSxRQUFzQztRQUN6RixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzVFLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLE9BQU8sQ0FBQTtRQUN0QyxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxPQUFPLENBQUE7SUFDM0MsQ0FBQztJQUVELHNCQUFJLHNDQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUE7UUFDdkMsQ0FBQzs7O09BQUE7SUFFRCxpQ0FBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFFRCxnQ0FBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFFRCxtQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQ2xDLENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFBO1FBQ3ZDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNENBQWE7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUE7UUFDN0MsQ0FBQzs7O09BQUE7SUFFRCx3Q0FBWSxHQUFaLFVBQWEsS0FBWTtRQUNmLElBQUEsdUJBQU8sQ0FBVTtRQUNqQixJQUFBLGtEQUFLLENBQXlDO1FBQ3RELElBQUksS0FBSyxFQUFFO1lBQ1QsSUFBSSxDQUFDLDRCQUE0QixDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFDNUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUE7U0FDbEQ7SUFDSCxDQUFDO0lBRUQsMENBQWMsR0FBZCxVQUFlLEtBQVk7UUFDakIsSUFBQSx1QkFBTyxDQUFVO1FBQ2pCLElBQUEsa0RBQUssQ0FBeUM7UUFDdEQsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3hELElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQ3BEO0lBQ0gsQ0FBQztJQUVPLG9EQUF3QixHQUFoQyxVQUFpQyxLQUFZO1FBQzNDLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckQsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNoQixXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUNwQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQTtTQUNqRDtRQUNELE9BQU8sV0FBVyxDQUFBO0lBQ3BCLENBQUM7SUFFTyx3REFBNEIsR0FBcEMsVUFBcUMsT0FBZ0I7UUFDbkQsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM1RCxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ2xCLGFBQWEsR0FBRyxJQUFJLEdBQUcsQ0FBQTtZQUN2QixJQUFJLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUN4RDtRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyxzQ0FBVSxHQUFsQixVQUFtQixLQUFZO1FBQzdCLElBQUk7WUFDRixJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3JELE9BQU8sRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFBO1NBQ2pCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxPQUFPLEVBQUUsS0FBSyxPQUFBLEVBQUUsQ0FBQTtTQUNqQjtJQUNILENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFqRkQsSUFpRkMifQ==","import { Action } from \"./action\";\nimport { Binding } from \"./binding\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar BindingObserver = /** @class */ (function () {\n    function BindingObserver(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map;\n    }\n    BindingObserver.prototype.start = function () {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    };\n    BindingObserver.prototype.stop = function () {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    };\n    Object.defineProperty(BindingObserver.prototype, \"element\", {\n        get: function () {\n            return this.context.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"actionAttribute\", {\n        get: function () {\n            return this.schema.actionAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"schema\", {\n        get: function () {\n            return this.context.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.bindingsByAction.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BindingObserver.prototype.connectAction = function (action) {\n        var binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    };\n    BindingObserver.prototype.disconnectAction = function (action) {\n        var binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    };\n    BindingObserver.prototype.disconnectAllActions = function () {\n        var _this = this;\n        this.bindings.forEach(function (binding) { return _this.delegate.bindingDisconnected(binding); });\n        this.bindingsByAction.clear();\n    };\n    // Value observer delegate\n    BindingObserver.prototype.parseValueForToken = function (token) {\n        var action = Action.forToken(token);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    };\n    BindingObserver.prototype.elementMatchedValue = function (element, action) {\n        this.connectAction(action);\n    };\n    BindingObserver.prototype.elementUnmatchedValue = function (element, action) {\n        this.disconnectAction(action);\n    };\n    return BindingObserver;\n}());\nexport { BindingObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZGluZ19vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW5kaW5nX29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQUluQyxPQUFPLEVBQVMsaUJBQWlCLEVBQTZCLE1BQU0sOEJBQThCLENBQUE7QUFPbEc7SUFNRSx5QkFBWSxPQUFnQixFQUFFLFFBQWlDO1FBQzdELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNqQyxDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDM0IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFBO1lBQ3hGLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtTQUMvQjtJQUNILENBQUM7SUFFRCw4QkFBSSxHQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO1lBQzdCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFBO1lBQzdCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO1NBQzVCO0lBQ0gsQ0FBQztJQUVELHNCQUFJLG9DQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFBO1FBQzdCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksdUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0Q0FBZTthQUFuQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUE7UUFDcEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxtQ0FBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQTtRQUM1QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHFDQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7UUFDbkQsQ0FBQzs7O09BQUE7SUFFTyx1Q0FBYSxHQUFyQixVQUFzQixNQUFjO1FBQ2xDLElBQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDakQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN6QyxDQUFDO0lBRU8sMENBQWdCLEdBQXhCLFVBQXlCLE1BQWM7UUFDckMsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNqRCxJQUFJLE9BQU8sRUFBRTtZQUNYLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQTtTQUMzQztJQUNILENBQUM7SUFFTyw4Q0FBb0IsR0FBNUI7UUFBQSxpQkFHQztRQUZDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUEsT0FBTyxJQUFJLE9BQUEsS0FBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsRUFBMUMsQ0FBMEMsQ0FBQyxDQUFBO1FBQzVFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRUQsMEJBQTBCO0lBRTFCLDRDQUFrQixHQUFsQixVQUFtQixLQUFZO1FBQzdCLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckMsSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDeEMsT0FBTyxNQUFNLENBQUE7U0FDZDtJQUNILENBQUM7SUFFRCw2Q0FBbUIsR0FBbkIsVUFBb0IsT0FBZ0IsRUFBRSxNQUFjO1FBQ2xELElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDNUIsQ0FBQztJQUVELCtDQUFxQixHQUFyQixVQUFzQixPQUFnQixFQUFFLE1BQWM7UUFDcEQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFDSCxzQkFBQztBQUFELENBQUMsQUFsRkQsSUFrRkMifQ==","import { BindingObserver } from \"./binding_observer\";\nvar Context = /** @class */ (function () {\n    function Context(module, scope) {\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        try {\n            this.controller.initialize();\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    Context.prototype.connect = function () {\n        this.bindingObserver.start();\n        try {\n            this.controller.connect();\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    };\n    Context.prototype.disconnect = function () {\n        try {\n            this.controller.disconnect();\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.bindingObserver.stop();\n    };\n    Object.defineProperty(Context.prototype, \"application\", {\n        get: function () {\n            return this.module.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"identifier\", {\n        get: function () {\n            return this.module.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"dispatcher\", {\n        get: function () {\n            return this.application.dispatcher;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"parentElement\", {\n        get: function () {\n            return this.element.parentElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Error handling\n    Context.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element;\n        detail = Object.assign({ identifier: identifier, controller: controller, element: element }, detail);\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQVFwRDtJQU1FLGlCQUFZLE1BQWMsRUFBRSxLQUFZO1FBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDeEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBRWpFLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFBO1NBQzdCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx5QkFBeUIsQ0FBQyxDQUFBO1NBQ25EO0lBQ0gsQ0FBQztJQUVELHlCQUFPLEdBQVA7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRTVCLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFBO1NBQzFCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBdUIsQ0FBQyxDQUFBO1NBQ2pEO0lBQ0gsQ0FBQztJQUVELDRCQUFVLEdBQVY7UUFDRSxJQUFJO1lBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQTtTQUM3QjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQTtTQUNwRDtRQUVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDN0IsQ0FBQztJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUE7UUFDL0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwyQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFVO2FBQWQ7WUFDRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFBO1FBQ3BDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNEJBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxrQ0FBYTthQUFqQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUE7UUFDbkMsQ0FBQzs7O09BQUE7SUFFRCxpQkFBaUI7SUFFakIsNkJBQVcsR0FBWCxVQUFZLEtBQVksRUFBRSxPQUFlLEVBQUUsTUFBbUI7UUFBbkIsdUJBQUEsRUFBQSxXQUFtQjtRQUN0RCxJQUFBLFNBQTBDLEVBQXhDLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxvQkFBTyxDQUFTO1FBQ2hELE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsVUFBVSxZQUFBLEVBQUUsVUFBVSxZQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUNuRSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsV0FBUyxPQUFTLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDakUsQ0FBQztJQUNILGNBQUM7QUFBRCxDQUFDLEFBdEVELElBc0VDIn0=","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/** @hidden */\nexport function blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: blessControllerConstructor(definition.controllerConstructor)\n    };\n}\nfunction blessControllerConstructor(controllerConstructor) {\n    var constructor = extend(controllerConstructor);\n    constructor.bless();\n    return constructor;\n}\nvar extend = (function () {\n    function extendWithReflect(constructor) {\n        function Controller() {\n            var _newTarget = this && this instanceof Controller ? this.constructor : void 0;\n            return Reflect.construct(constructor, arguments, _newTarget);\n        }\n        Controller.prototype = Object.create(constructor.prototype, {\n            constructor: { value: Controller }\n        });\n        Reflect.setPrototypeOf(Controller, constructor);\n        return Controller;\n    }\n    function testReflectExtension() {\n        var a = function () { this.a.call(this); };\n        var b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b;\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return function (constructor) { return /** @class */ (function (_super) {\n            __extends(Controller, _super);\n            function Controller() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return Controller;\n        }(constructor)); };\n    }\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5pdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFPQSxjQUFjO0FBQ2QsTUFBTSwwQkFBMEIsVUFBc0I7SUFDcEQsT0FBTztRQUNMLFVBQVUsRUFBRSxVQUFVLENBQUMsVUFBVTtRQUNqQyxxQkFBcUIsRUFBRSwwQkFBMEIsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUM7S0FDcEYsQ0FBQTtBQUNILENBQUM7QUFFRCxvQ0FBb0MscUJBQTRDO0lBQzlFLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ2pELFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNuQixPQUFPLFdBQVcsQ0FBQTtBQUNwQixDQUFDO0FBRUQsSUFBTSxNQUFNLEdBQUcsQ0FBQztJQUdkLDJCQUFzRCxXQUFjO1FBQ2xFOztZQUNFLE9BQU8sT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxhQUFhLENBQUE7UUFDOUQsQ0FBQztRQUVELFVBQVUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFO1lBQzFELFdBQVcsRUFBRSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUU7U0FDbkMsQ0FBQyxDQUFBO1FBRUYsT0FBTyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUE7UUFDL0MsT0FBTyxVQUFpQixDQUFBO0lBQzFCLENBQUM7SUFFRDtRQUNFLElBQU0sQ0FBQyxHQUFHLGNBQXNCLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUMsQ0FBUSxDQUFBO1FBQzFELElBQU0sQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzlCLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLGNBQVksQ0FBQyxDQUFBO1FBQzdCLE9BQU8sSUFBSSxDQUFDLENBQUE7SUFDZCxDQUFDO0lBRUQsSUFBSTtRQUNGLG9CQUFvQixFQUFFLENBQUE7UUFDdEIsT0FBTyxpQkFBaUIsQ0FBQTtLQUN6QjtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2QsT0FBTyxVQUE0QixXQUFjLElBQUs7WUFBeUIsOEJBQVc7WUFBcEM7O1lBQXNDLENBQUM7WUFBRCxpQkFBQztRQUFELENBQUMsQUFBdkMsQ0FBeUIsV0FBVyxJQUFwQyxDQUF1QyxDQUFBO0tBQzlGO0FBQ0gsQ0FBQyxDQUFDLEVBQUUsQ0FBQSJ9","import { Context } from \"./context\";\nimport { blessDefinition } from \"./definition\";\nvar Module = /** @class */ (function () {\n    function Module(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap;\n        this.connectedContexts = new Set;\n    }\n    Object.defineProperty(Module.prototype, \"identifier\", {\n        get: function () {\n            return this.definition.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"controllerConstructor\", {\n        get: function () {\n            return this.definition.controllerConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"contexts\", {\n        get: function () {\n            return Array.from(this.connectedContexts);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Module.prototype.connectContextForScope = function (scope) {\n        var context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    };\n    Module.prototype.disconnectContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    };\n    Module.prototype.fetchContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    };\n    return Module;\n}());\nexport { Module };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBRW5DLE9BQU8sRUFBYyxlQUFlLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFHMUQ7SUFNRSxnQkFBWSxXQUF3QixFQUFFLFVBQXNCO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxPQUFPLENBQUE7UUFDbEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksR0FBRyxDQUFBO0lBQ2xDLENBQUM7SUFFRCxzQkFBSSw4QkFBVTthQUFkO1lBQ0UsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQTtRQUNuQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHlDQUFxQjthQUF6QjtZQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQTtRQUM5QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUE7UUFDM0MsQ0FBQzs7O09BQUE7SUFFRCx1Q0FBc0IsR0FBdEIsVUFBdUIsS0FBWTtRQUNqQyxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDaEQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNuQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDbkIsQ0FBQztJQUVELDBDQUF5QixHQUF6QixVQUEwQixLQUFZO1FBQ3BDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQy9DLElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUN0QyxPQUFPLENBQUMsVUFBVSxFQUFFLENBQUE7U0FDckI7SUFDSCxDQUFDO0lBRU8scUNBQW9CLEdBQTVCLFVBQTZCLEtBQVk7UUFDdkMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDN0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNaLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFDbEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO1NBQ3pDO1FBQ0QsT0FBTyxPQUFPLENBQUE7SUFDaEIsQ0FBQztJQUNILGFBQUM7QUFBRCxDQUFDLEFBL0NELElBK0NDIn0=","var DataMap = /** @class */ (function () {\n    function DataMap(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(DataMap.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DataMap.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DataMap.prototype.get = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.getAttribute(key);\n    };\n    DataMap.prototype.set = function (key, value) {\n        key = this.getFormattedKey(key);\n        this.element.setAttribute(key, value);\n        return this.get(key);\n    };\n    DataMap.prototype.has = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.hasAttribute(key);\n    };\n    DataMap.prototype.delete = function (key) {\n        if (this.has(key)) {\n            key = this.getFormattedKey(key);\n            this.element.removeAttribute(key);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    DataMap.prototype.getFormattedKey = function (key) {\n        return \"data-\" + this.identifier + \"-\" + dasherize(key);\n    };\n    return DataMap;\n}());\nexport { DataMap };\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, function (_, char) { return \"-\" + char.toLowerCase(); });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YV9tYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGF0YV9tYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFHRSxpQkFBWSxLQUFZO1FBQ3RCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0lBQ3BCLENBQUM7SUFFRCxzQkFBSSw0QkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFVO2FBQWQ7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQscUJBQUcsR0FBSCxVQUFJLEdBQVc7UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCxxQkFBRyxHQUFILFVBQUksR0FBVyxFQUFFLEtBQWE7UUFDNUIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QixDQUFDO0lBRUQscUJBQUcsR0FBSCxVQUFJLEdBQVc7UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCx3QkFBTSxHQUFOLFVBQU8sR0FBVztRQUNoQixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDakIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDakMsT0FBTyxJQUFJLENBQUE7U0FDWjthQUFNO1lBQ0wsT0FBTyxLQUFLLENBQUE7U0FDYjtJQUNILENBQUM7SUFFTyxpQ0FBZSxHQUF2QixVQUF3QixHQUFXO1FBQ2pDLE9BQU8sVUFBUSxJQUFJLENBQUMsVUFBVSxTQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUcsQ0FBQTtJQUNwRCxDQUFDO0lBQ0gsY0FBQztBQUFELENBQUMsQUE1Q0QsSUE0Q0M7O0FBRUQsbUJBQW1CLEtBQWE7SUFDOUIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxVQUFDLENBQUMsRUFBRSxJQUFJLElBQUssT0FBQSxNQUFJLElBQUksQ0FBQyxXQUFXLEVBQUksRUFBeEIsQ0FBd0IsQ0FBQyxDQUFBO0FBQ3pFLENBQUMifQ==","/** @hidden */\nexport function attributeValueContainsToken(attributeName, token) {\n    return \"[\" + attributeName + \"~=\\\"\" + token + \"\\\"]\";\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0b3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlbGVjdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxjQUFjO0FBQ2QsTUFBTSxzQ0FBc0MsYUFBcUIsRUFBRSxLQUFhO0lBQzlFLE9BQU8sTUFBSSxhQUFhLFlBQU0sS0FBSyxRQUFJLENBQUE7QUFDekMsQ0FBQyJ9","import { attributeValueContainsToken } from \"./selectors\";\nvar TargetSet = /** @class */ (function () {\n    function TargetSet(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(TargetSet.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"schema\", {\n        get: function () {\n            return this.scope.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TargetSet.prototype.has = function (targetName) {\n        return this.find(targetName) != null;\n    };\n    TargetSet.prototype.find = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findElement(selector);\n    };\n    TargetSet.prototype.findAll = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findAllElements(selector);\n    };\n    TargetSet.prototype.getSelectorForTargetNames = function (targetNames) {\n        var _this = this;\n        return targetNames.map(function (targetName) { return _this.getSelectorForTargetName(targetName); }).join(\", \");\n    };\n    TargetSet.prototype.getSelectorForTargetName = function (targetName) {\n        var targetDescriptor = this.identifier + \".\" + targetName;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    };\n    return TargetSet;\n}());\nexport { TargetSet };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3NldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXJnZXRfc2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQUdFLG1CQUFZLEtBQVk7UUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDcEIsQ0FBQztJQUVELHNCQUFJLDhCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksaUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUE7UUFDOUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw2QkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHVCQUFHLEdBQUgsVUFBSSxVQUFrQjtRQUNwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFBO0lBQ3RDLENBQUM7SUFFRCx3QkFBSSxHQUFKO1FBQUsscUJBQXdCO2FBQXhCLFVBQXdCLEVBQXhCLHFCQUF3QixFQUF4QixJQUF3QjtZQUF4QixnQ0FBd0I7O1FBQzNCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUM1RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCwyQkFBTyxHQUFQO1FBQVEscUJBQXdCO2FBQXhCLFVBQXdCLEVBQXhCLHFCQUF3QixFQUF4QixJQUF3QjtZQUF4QixnQ0FBd0I7O1FBQzlCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUM1RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzdDLENBQUM7SUFFTyw2Q0FBeUIsR0FBakMsVUFBa0MsV0FBcUI7UUFBdkQsaUJBRUM7UUFEQyxPQUFPLFdBQVcsQ0FBQyxHQUFHLENBQUMsVUFBQSxVQUFVLElBQUksT0FBQSxLQUFJLENBQUMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLEVBQXpDLENBQXlDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDNUYsQ0FBQztJQUVPLDRDQUF3QixHQUFoQyxVQUFpQyxVQUFrQjtRQUNqRCxJQUFNLGdCQUFnQixHQUFNLElBQUksQ0FBQyxVQUFVLFNBQUksVUFBWSxDQUFBO1FBQzNELE9BQU8sMkJBQTJCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtJQUNuRixDQUFDO0lBQ0gsZ0JBQUM7QUFBRCxDQUFDLEFBekNELElBeUNDIn0=","import { DataMap } from \"./data_map\";\nimport { TargetSet } from \"./target_set\";\nimport { attributeValueContainsToken } from \"./selectors\";\nvar Scope = /** @class */ (function () {\n    function Scope(schema, identifier, element) {\n        this.schema = schema;\n        this.identifier = identifier;\n        this.element = element;\n        this.targets = new TargetSet(this);\n        this.data = new DataMap(this);\n    }\n    Scope.prototype.findElement = function (selector) {\n        return this.findAllElements(selector)[0];\n    };\n    Scope.prototype.findAllElements = function (selector) {\n        var head = this.element.matches(selector) ? [this.element] : [];\n        var tail = this.filterElements(Array.from(this.element.querySelectorAll(selector)));\n        return head.concat(tail);\n    };\n    Scope.prototype.filterElements = function (elements) {\n        var _this = this;\n        return elements.filter(function (element) { return _this.containsElement(element); });\n    };\n    Scope.prototype.containsElement = function (element) {\n        return element.closest(this.controllerSelector) === this.element;\n    };\n    Object.defineProperty(Scope.prototype, \"controllerSelector\", {\n        get: function () {\n            return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Scope;\n}());\nexport { Scope };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NvcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUVwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQU9FLGVBQVksTUFBYyxFQUFFLFVBQWtCLEVBQUUsT0FBZ0I7UUFDOUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFFRCwyQkFBVyxHQUFYLFVBQVksUUFBZ0I7UUFDMUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzFDLENBQUM7SUFFRCwrQkFBZSxHQUFmLFVBQWdCLFFBQWdCO1FBQzlCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQ2pFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNyRixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDMUIsQ0FBQztJQUVELDhCQUFjLEdBQWQsVUFBZSxRQUFtQjtRQUFsQyxpQkFFQztRQURDLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFBLE9BQU8sSUFBSSxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQTdCLENBQTZCLENBQUMsQ0FBQTtJQUNsRSxDQUFDO0lBRUQsK0JBQWUsR0FBZixVQUFnQixPQUFnQjtRQUM5QixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUNsRSxDQUFDO0lBRUQsc0JBQVkscUNBQWtCO2FBQTlCO1lBQ0UsT0FBTywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN0RixDQUFDOzs7T0FBQTtJQUNILFlBQUM7QUFBRCxDQUFDLEFBcENELElBb0NDIn0=","import { Scope } from \"./scope\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar ScopeObserver = /** @class */ (function () {\n    function ScopeObserver(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap;\n        this.scopeReferenceCounts = new WeakMap;\n    }\n    ScopeObserver.prototype.start = function () {\n        this.valueListObserver.start();\n    };\n    ScopeObserver.prototype.stop = function () {\n        this.valueListObserver.stop();\n    };\n    Object.defineProperty(ScopeObserver.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Value observer delegate\n    /** @hidden */\n    ScopeObserver.prototype.parseValueForToken = function (token) {\n        var element = token.element, identifier = token.content;\n        var scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        var scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = new Scope(this.schema, identifier, element);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementMatchedValue = function (element, value) {\n        var referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementUnmatchedValue = function (element, value) {\n        var referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    };\n    ScopeObserver.prototype.fetchScopesByIdentifierForElement = function (element) {\n        var scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map;\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    };\n    return ScopeObserver;\n}());\nexport { ScopeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGVfb2JzZXJ2ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NvcGVfb2JzZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUMvQixPQUFPLEVBQVMsaUJBQWlCLEVBQTZCLE1BQU0sOEJBQThCLENBQUE7QUFPbEc7SUFRRSx1QkFBWSxPQUFnQixFQUFFLE1BQWMsRUFBRSxRQUErQjtRQUMzRSxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RixJQUFJLENBQUMsMkJBQTJCLEdBQUcsSUFBSSxPQUFPLENBQUE7UUFDOUMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksT0FBTyxDQUFBO0lBQ3pDLENBQUM7SUFFRCw2QkFBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFFRCw0QkFBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFFRCxzQkFBSSw4Q0FBbUI7YUFBdkI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUE7UUFDeEMsQ0FBQzs7O09BQUE7SUFFRCwwQkFBMEI7SUFFMUIsY0FBYztJQUNkLDBDQUFrQixHQUFsQixVQUFtQixLQUFZO1FBQ3JCLElBQUEsdUJBQU8sRUFBRSwwQkFBbUIsQ0FBVTtRQUM5QyxJQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUUxRSxJQUFJLEtBQUssR0FBRyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQTtZQUNuRCxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQzFDO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDZCxDQUFDO0lBRUQsY0FBYztJQUNkLDJDQUFtQixHQUFuQixVQUFvQixPQUFnQixFQUFFLEtBQVk7UUFDaEQsSUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN0RSxJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsQ0FBQTtRQUNwRCxJQUFJLGNBQWMsSUFBSSxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDcEM7SUFDSCxDQUFDO0lBRUQsY0FBYztJQUNkLDZDQUFxQixHQUFyQixVQUFzQixPQUFnQixFQUFFLEtBQVk7UUFDbEQsSUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUMzRCxJQUFJLGNBQWMsRUFBRTtZQUNsQixJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxjQUFjLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDeEQsSUFBSSxjQUFjLElBQUksQ0FBQyxFQUFFO2dCQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQ3ZDO1NBQ0Y7SUFDSCxDQUFDO0lBRU8seURBQWlDLEdBQXpDLFVBQTBDLE9BQWdCO1FBQ3hELElBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUN0RSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDdkIsa0JBQWtCLEdBQUcsSUFBSSxHQUFHLENBQUE7WUFDNUIsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtTQUNsRTtRQUNELE9BQU8sa0JBQWtCLENBQUE7SUFDM0IsQ0FBQztJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQXpFRCxJQXlFQyJ9","import { Module } from \"./module\";\nimport { Multimap } from \"@stimulus/multimap\";\nimport { ScopeObserver } from \"./scope_observer\";\nvar Router = /** @class */ (function () {\n    function Router(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap;\n        this.modulesByIdentifier = new Map;\n    }\n    Object.defineProperty(Router.prototype, \"element\", {\n        get: function () {\n            return this.application.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"modules\", {\n        get: function () {\n            return Array.from(this.modulesByIdentifier.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"contexts\", {\n        get: function () {\n            return this.modules.reduce(function (contexts, module) { return contexts.concat(module.contexts); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Router.prototype.start = function () {\n        this.scopeObserver.start();\n    };\n    Router.prototype.stop = function () {\n        this.scopeObserver.stop();\n    };\n    Router.prototype.loadDefinition = function (definition) {\n        this.unloadIdentifier(definition.identifier);\n        var module = new Module(this.application, definition);\n        this.connectModule(module);\n    };\n    Router.prototype.unloadIdentifier = function (identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    };\n    Router.prototype.getContextForElementAndIdentifier = function (element, identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find(function (context) { return context.element == element; });\n        }\n    };\n    // Error handler delegate\n    /** @hidden */\n    Router.prototype.handleError = function (error, message, detail) {\n        this.application.handleError(error, message, detail);\n    };\n    // Scope observer delegate\n    /** @hidden */\n    Router.prototype.scopeConnected = function (scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    };\n    /** @hidden */\n    Router.prototype.scopeDisconnected = function (scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    };\n    // Modules\n    Router.prototype.connectModule = function (module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.connectContextForScope(scope); });\n    };\n    Router.prototype.disconnectModule = function (module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.disconnectContextForScope(scope); });\n    };\n    return Router;\n}());\nexport { Router };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBQ2pDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUc3QyxPQUFPLEVBQUUsYUFBYSxFQUF5QixNQUFNLGtCQUFrQixDQUFBO0FBRXZFO0lBTUUsZ0JBQVksV0FBd0I7UUFDbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUE7UUFDOUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksUUFBUSxDQUFBO1FBQ3RDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNwQyxDQUFDO0lBRUQsc0JBQUksMkJBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwwQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFtQjthQUF2QjtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQTtRQUN4QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDJCQUFPO2FBQVg7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7UUFDdEQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0QkFBUTthQUFaO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FB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","export var defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\"\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NjaGVtYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLENBQUMsSUFBTSxhQUFhLEdBQVc7SUFDbkMsbUJBQW1CLEVBQUUsaUJBQWlCO0lBQ3RDLGVBQWUsRUFBRSxhQUFhO0lBQzlCLGVBQWUsRUFBRSxhQUFhO0NBQy9CLENBQUEifQ==","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Dispatcher } from \"./dispatcher\";\nimport { Router } from \"./router\";\nimport { defaultSchema } from \"./schema\";\nvar Application = /** @class */ (function () {\n    function Application(element, schema) {\n        if (element === void 0) { element = document.documentElement; }\n        if (schema === void 0) { schema = defaultSchema; }\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n    }\n    Application.start = function (element, schema) {\n        var application = new Application(element, schema);\n        application.start();\n        return application;\n    };\n    Application.prototype.start = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, domReady()];\n                    case 1:\n                        _a.sent();\n                        this.router.start();\n                        this.dispatcher.start();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Application.prototype.stop = function () {\n        this.router.stop();\n        this.dispatcher.stop();\n    };\n    Application.prototype.register = function (identifier, controllerConstructor) {\n        this.load({ identifier: identifier, controllerConstructor: controllerConstructor });\n    };\n    Application.prototype.load = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var definitions = Array.isArray(head) ? head : [head].concat(rest);\n        definitions.forEach(function (definition) { return _this.router.loadDefinition(definition); });\n    };\n    Application.prototype.unload = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var identifiers = Array.isArray(head) ? head : [head].concat(rest);\n        identifiers.forEach(function (identifier) { return _this.router.unloadIdentifier(identifier); });\n    };\n    Object.defineProperty(Application.prototype, \"controllers\", {\n        // Controllers\n        get: function () {\n            return this.router.contexts.map(function (context) { return context.controller; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Application.prototype.getControllerForElementAndIdentifier = function (element, identifier) {\n        var context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    };\n    // Error handling\n    Application.prototype.handleError = function (error, message, detail) {\n        console.error(\"%s\\n\\n%o\\n\\n%o\", message, error, detail);\n    };\n    return Application;\n}());\nexport { Application };\nfunction domReady() {\n    return new Promise(function (resolve) {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", resolve);\n        }\n        else {\n            resolve();\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbGljYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXBwbGljYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBRXpDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFVLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUVoRDtJQVlFLHFCQUFZLE9BQTJDLEVBQUUsTUFBOEI7UUFBM0Usd0JBQUEsRUFBQSxVQUFtQixRQUFRLENBQUMsZUFBZTtRQUFFLHVCQUFBLEVBQUEsc0JBQThCO1FBQ3JGLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNoQyxDQUFDO0lBWE0saUJBQUssR0FBWixVQUFhLE9BQWlCLEVBQUUsTUFBZTtRQUM3QyxJQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDcEQsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ25CLE9BQU8sV0FBVyxDQUFBO0lBQ3BCLENBQUM7SUFTSywyQkFBSyxHQUFYOzs7OzRCQUNFLHFCQUFNLFFBQVEsRUFBRSxFQUFBOzt3QkFBaEIsU0FBZ0IsQ0FBQTt3QkFDaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTt3QkFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQTs7Ozs7S0FDeEI7SUFFRCwwQkFBSSxHQUFKO1FB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","/** @hidden */\nexport function defineTargetProperties(constructor) {\n    var prototype = constructor.prototype;\n    var targetNames = getTargetNamesForConstructor(constructor);\n    targetNames.forEach(function (name) {\n        var _a;\n        return defineLinkedProperties(prototype, (_a = {},\n            _a[name + \"Target\"] = {\n                get: function () {\n                    var target = this.targets.find(name);\n                    if (target) {\n                        return target;\n                    }\n                    else {\n                        throw new Error(\"Missing target element \\\"\" + this.identifier + \".\" + name + \"\\\"\");\n                    }\n                }\n            },\n            _a[name + \"Targets\"] = {\n                get: function () {\n                    return this.targets.findAll(name);\n                }\n            },\n            _a[\"has\" + capitalize(name) + \"Target\"] = {\n                get: function () {\n                    return this.targets.has(name);\n                }\n            },\n            _a));\n    });\n}\nfunction getTargetNamesForConstructor(constructor) {\n    var ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce(function (targetNames, constructor) {\n        getOwnTargetNamesForConstructor(constructor).forEach(function (name) { return targetNames.add(name); });\n        return targetNames;\n    }, new Set));\n}\nfunction getAncestorsForConstructor(constructor) {\n    var ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors;\n}\nfunction getOwnTargetNamesForConstructor(constructor) {\n    var definition = constructor[\"targets\"];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction defineLinkedProperties(object, properties) {\n    Object.keys(properties).forEach(function (name) {\n        if (!(name in object)) {\n            var descriptor = properties[name];\n            Object.defineProperty(object, name, descriptor);\n        }\n    });\n}\nfunction capitalize(name) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3Byb3BlcnRpZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGFyZ2V0X3Byb3BlcnRpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsY0FBYztBQUNkLE1BQU0saUNBQWlDLFdBQXFCO0lBQzFELElBQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUE7SUFDdkMsSUFBTSxXQUFXLEdBQUcsNEJBQTRCLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDN0QsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7O1FBQUksT0FBQSxzQkFBc0IsQ0FBQyxTQUFTO1lBQzFELEdBQUksSUFBSSxXQUFRLElBQUc7Z0JBQ2pCLEdBQUc7b0JBQ0QsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7b0JBQ3RDLElBQUksTUFBTSxFQUFFO3dCQUNWLE9BQU8sTUFBTSxDQUFBO3FCQUNkO3lCQUFNO3dCQUNMLE1BQU0sSUFBSSxLQUFLLENBQUMsOEJBQTJCLElBQUksQ0FBQyxVQUFVLFNBQUksSUFBSSxPQUFHLENBQUMsQ0FBQTtxQkFDdkU7Z0JBQ0gsQ0FBQzthQUNGO1lBQ0QsR0FBSSxJQUFJLFlBQVMsSUFBRztnQkFDbEIsR0FBRztvQkFDRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxDQUFDO2FBQ0Y7WUFDRCxHQUFDLFFBQU0sVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFRLElBQUc7Z0JBQ2hDLEdBQUc7b0JBQ0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDL0IsQ0FBQzthQUNGO2dCQUNEO0lBckIwQixDQXFCMUIsQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQUVELHNDQUFzQyxXQUFxQjtJQUN6RCxJQUFNLFNBQVMsR0FBRywwQkFBMEIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtJQUN6RCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFDLFdBQVcsRUFBRSxXQUFXO1FBQzFELCtCQUErQixDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQXJCLENBQXFCLENBQUMsQ0FBQTtRQUNuRixPQUFPLFdBQVcsQ0FBQTtJQUNwQixDQUFDLEVBQUUsSUFBSSxHQUFrQixDQUFDLENBQUMsQ0FBQTtBQUM3QixDQUFDO0FBRUQsb0NBQW9DLFdBQXFCO0lBQ3ZELElBQU0sU0FBUyxHQUFlLEVBQUUsQ0FBQTtJQUNoQyxPQUFPLFdBQVcsRUFBRTtRQUNsQixTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzNCLFdBQVcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFBO0tBQ2pEO0lBQ0QsT0FBTyxTQUFTLENBQUE7QUFDbEIsQ0FBQztBQUVELHlDQUF5QyxXQUFxQjtJQUM1RCxJQUFNLFVBQVUsR0FBSSxXQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ2xELE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7QUFDcEQsQ0FBQztBQUVELGdDQUFnQyxNQUFXLEVBQUUsVUFBaUM7SUFDNUUsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJO1FBQ25DLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsRUFBRTtZQUNyQixJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDbkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFBO1NBQ2hEO0lBQ0gsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBRUQsb0JBQW9CLElBQVk7SUFDOUIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDckQsQ0FBQyJ9","import { defineTargetProperties } from \"./target_properties\";\nvar Controller = /** @class */ (function () {\n    function Controller(context) {\n        this.context = context;\n    }\n    Controller.bless = function () {\n        defineTargetProperties(this);\n    };\n    Object.defineProperty(Controller.prototype, \"application\", {\n        get: function () {\n            return this.context.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"targets\", {\n        get: function () {\n            return this.scope.targets;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"data\", {\n        get: function () {\n            return this.scope.data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Controller.prototype.initialize = function () {\n        // Override in your subclass to set up initial controller state\n    };\n    Controller.prototype.connect = function () {\n        // Override in your subclass to respond when the controller is connected to the DOM\n    };\n    Controller.prototype.disconnect = function () {\n        // Override in your subclass to respond when the controller is disconnected from the DOM\n    };\n    Controller.targets = [];\n    return Controller;\n}());\nexport { Controller };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHFCQUFxQixDQUFBO0FBTzVEO0lBU0Usb0JBQVksT0FBZ0I7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7SUFDeEIsQ0FBQztJQU5NLGdCQUFLLEdBQVo7UUFDRSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM5QixDQUFDO0lBTUQsc0JBQUksbUNBQVc7YUFBZjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw2QkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksa0NBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUE7UUFDOUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwrQkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFJO2FBQVI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFBO1FBQ3hCLENBQUM7OztPQUFBO0lBRUQsK0JBQVUsR0FBVjtRQUNFLCtEQUErRDtJQUNqRSxDQUFDO0lBRUQsNEJBQU8sR0FBUDtRQUNFLG1GQUFtRjtJQUNyRixDQUFDO0lBRUQsK0JBQVUsR0FBVjtRQUNFLHdGQUF3RjtJQUMxRixDQUFDO0lBOUNNLGtCQUFPLEdBQWEsRUFBRSxDQUFBO0lBK0MvQixpQkFBQztDQUFBLEFBaERELElBZ0RDO1NBaERZLFVBQVUifQ==","/*\nTurbolinks 5.2.0\nCopyright  2018 Basecamp, LLC\n */\n(function(){var t=this;(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener}(),visit:function(t,r){return e.controller.visit(t,r)},clearCache:function(){return e.controller.clearCache()},setProgressBarDelay:function(t){return e.controller.setProgressBarDelay(t)}}}).call(this)}).call(t);var e=t.Turbolinks;(function(){(function(){var t,r,n,o=[].slice;e.copyObject=function(t){var e,r,n;r={};for(e in t)n=t[e],r[e]=n;return r},e.closest=function(e,r){return t.call(e,r)},t=function(){var t,e;return t=document.documentElement,null!=(e=t.closest)?e:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&r.call(e,t))return e;e=e.parentNode}}}(),e.defer=function(t){return setTimeout(t,1)},e.throttle=function(t){var e;return e=null,function(){var r;return r=1<=arguments.length?o.call(arguments,0):[],null!=e?e:e=requestAnimationFrame(function(n){return function(){return e=null,t.apply(n,r)}}(this))}},e.dispatch=function(t,e){var r,o,i,s,a,u;return a=null!=e?e:{},u=a.target,r=a.cancelable,o=a.data,i=document.createEvent(\"Events\"),i.initEvent(t,!0,r===!0),i.data=null!=o?o:{},i.cancelable&&!n&&(s=i.preventDefault,i.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,\"defaultPrevented\",{get:function(){return!0}}),s.call(this)}),(null!=u?u:document).dispatchEvent(i),i},n=function(){var t;return t=document.createEvent(\"Events\"),t.initEvent(\"test\",!0,!0),t.preventDefault(),t.defaultPrevented}(),e.match=function(t,e){return r.call(t,e)},r=function(){var t,e,r,n;return t=document.documentElement,null!=(e=null!=(r=null!=(n=t.matchesSelector)?n:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector}(),e.uuid=function(){var t,e,r;for(r=\"\",t=e=1;36>=e;t=++e)r+=9===t||14===t||19===t||24===t?\"-\":15===t?\"4\":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return r}}).call(this),function(){e.Location=function(){function t(t){var e,r;null==t&&(t=\"\"),r=document.createElement(\"a\"),r.href=t.toString(),this.absoluteURL=r.href,e=r.hash.length,2>e?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=r.hash.slice(1))}var e,r,n,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split(\"/\",3).join(\"/\")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\\/\\/[^\\/]*(\\/[^?;]*)/))?e[1]:void 0)?t:\"/\"},t.prototype.getPathComponents=function(){return this.getPath().split(\"/\").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\\.[^.]*$/))?e[0]:void 0)?t:\"\"},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=r(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},r=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return n(t,\"/\")?t:t+\"/\"},o=function(t,e){return t.slice(0,e.length)===e},n=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.HttpRequest=function(){function r(r,n,o){this.delegate=r,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=e.Location.wrap(n).requestURL,this.referrer=e.Location.wrap(o).absoluteURL,this.createXHR()}return r.NETWORK_FAILURE=0,r.TIMEOUT_FAILURE=-1,r.timeout=60,r.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,\"function\"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},r.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},r.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},r.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader(\"Turbolinks-Location\")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},r.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},r.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},r.prototype.requestCanceled=function(){return this.endRequest()},r.prototype.notifyApplicationBeforeRequestStart=function(){return e.dispatch(\"turbolinks:request-start\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.notifyApplicationAfterRequestEnd=function(){return e.dispatch(\"turbolinks:request-end\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open(\"GET\",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader(\"Accept\",\"text/html, application/xhtml+xml\"),this.xhr.setRequestHeader(\"Turbolinks-Referrer\",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},r.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},r.prototype.setProgress=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},r.prototype.destroy=function(){var t;return this.setProgress(1),\"function\"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var r;return r=300,e.defaultCSS=\".turbolinks-progress-bar {\\n  position: fixed;\\n  display: block;\\n  top: 0;\\n  left: 0;\\n  height: 3px;\\n  background: #0076ff;\\n  z-index: 9999;\\n  transition: width \"+r+\"ms ease-out, opacity \"+r/2+\"ms \"+r/2+\"ms ease-in;\\n  transform: translate3d(0, 0, 0);\\n}\",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},e.prototype.setValue=function(t){return this.value=t,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*r)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,r)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+\"%\"}}(this))},e.prototype.createStylesheetElement=function(){var t;return t=document.createElement(\"style\"),t.type=\"text/css\",t.textContent=this.constructor.defaultCSS,t},e.prototype.createProgressElement=function(){var t;return t=document.createElement(\"div\"),t.className=\"turbolinks-progress-bar\",t},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.BrowserAdapter=function(){function r(r){this.controller=r,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new e.ProgressBar}var n,o,i;return i=e.HttpRequest,n=i.NETWORK_FAILURE,o=i.TIMEOUT_FAILURE,r.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},r.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},r.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||\"restore\"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},r.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},r.prototype.visitRequestCompleted=function(t){return t.loadResponse()},r.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case o:return this.reload();default:return t.loadResponse()}},r.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},r.prototype.visitCompleted=function(t){return t.followRedirect()},r.prototype.pageInvalidated=function(){return this.reload()},r.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},r.prototype.showProgressBar=function(){return this.progressBar.show()},r.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},r.prototype.reload=function(){return window.location.reload()},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.History=function(){function r(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"popstate\",this.onPopState,!1),addEventListener(\"load\",this.onPageLoad,!1),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"popstate\",this.onPopState,!1),removeEventListener(\"load\",this.onPageLoad,!1),this.started=!1):void 0},r.prototype.push=function(t,r){return t=e.Location.wrap(t),this.update(\"push\",t,r)},r.prototype.replace=function(t,r){return t=e.Location.wrap(t),this.update(\"replace\",t,r)},r.prototype.onPopState=function(t){var r,n,o,i;return this.shouldHandlePopState()&&(i=null!=(n=t.state)?n.turbolinks:void 0)?(r=e.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(r,o)):void 0},r.prototype.onPageLoad=function(t){return e.defer(function(t){return function(){return t.pageLoaded=!0}}(this))},r.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},r.prototype.pageIsLoaded=function(){return this.pageLoaded||\"complete\"===document.readyState},r.prototype.update=function(t,e,r){var n;return n={turbolinks:{restorationIdentifier:r}},history[t+\"State\"](n,null,e)},r}()}.call(this),function(){e.HeadDetails=function(){function t(t){var e,r,n,s,a,u;for(this.elements={},n=0,a=t.length;a>n;n++)u=t[n],u.nodeType===Node.ELEMENT_NODE&&(s=u.outerHTML,r=null!=(e=this.elements)[s]?e[s]:e[s]={type:i(u),tracked:o(u),elements:[]},r.elements.push(u))}var e,r,n,o,i;return t.fromHeadElement=function(t){var e;return new this(null!=(e=null!=t?t.childNodes:void 0)?e:[])},t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t,e;return function(){var r,n;r=this.elements,n=[];for(t in r)e=r[t].tracked,e&&n.push(t);return n}.call(this).join(\"\")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"script\",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"stylesheet\",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var r,n,o,i,s,a;o=this.elements,s=[];for(n in o)i=o[n],a=i.type,r=i.elements,a!==t||e.hasElementWithKey(n)||s.push(r[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,r,n,o,i,s;r=[],n=this.elements;for(e in n)o=n[e],s=o.type,i=o.tracked,t=o.elements,null!=s||i?t.length>1&&r.push.apply(r,t.slice(1)):r.push.apply(r,t);return r},t.prototype.getMetaValue=function(t){var e;return null!=(e=this.findMetaElementByName(t))?e.getAttribute(\"content\"):void 0},t.prototype.findMetaElementByName=function(t){var r,n,o,i;r=void 0,i=this.elements;for(o in i)n=i[o].elements,e(n[0],t)&&(r=n[0]);return r},i=function(t){return r(t)?\"script\":n(t)?\"stylesheet\":void 0},o=function(t){return\"reload\"===t.getAttribute(\"data-turbolinks-track\")},r=function(t){var e;return e=t.tagName.toLowerCase(),\"script\"===e},n=function(t){var e;return e=t.tagName.toLowerCase(),\"style\"===e||\"link\"===e&&\"stylesheet\"===t.getAttribute(\"rel\")},e=function(t,e){var r;return r=t.tagName.toLowerCase(),\"meta\"===r&&t.getAttribute(\"name\")===e},t}()}.call(this),function(){e.Snapshot=function(){function t(t,e){this.headDetails=t,this.bodyElement=e}return t.wrap=function(t){return t instanceof this?t:\"string\"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)},t.fromHTMLString=function(t){var e;return e=document.createElement(\"html\"),e.innerHTML=t,this.fromHTMLElement(e)},t.fromHTMLElement=function(t){var r,n,o,i;return o=t.querySelector(\"head\"),r=null!=(i=t.querySelector(\"body\"))?i:document.createElement(\"body\"),n=e.HeadDetails.fromHeadElement(o),new this(n,r)},t.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},t.prototype.getRootLocation=function(){var t,r;return r=null!=(t=this.getSetting(\"root\"))?t:\"/\",new e.Location(r)},t.prototype.getCacheControlValue=function(){return this.getSetting(\"cache-control\")},t.prototype.getElementForAnchor=function(t){try{return this.bodyElement.querySelector(\"[id='\"+t+\"'], a[name='\"+t+\"']\")}catch(e){}},t.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll(\"[id][data-turbolinks-permanent]\")},t.prototype.getPermanentElementById=function(t){return this.bodyElement.querySelector(\"#\"+t+\"[data-turbolinks-permanent]\")},t.prototype.getPermanentElementsPresentInSnapshot=function(t){var e,r,n,o,i;for(o=this.getPermanentElements(),i=[],r=0,n=o.length;n>r;r++)e=o[r],t.getPermanentElementById(e.id)&&i.push(e);return i},t.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector(\"[autofocus]\")},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return\"no-preview\"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return\"no-cache\"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return\"reload\"!==this.getSetting(\"visit-control\")},t.prototype.getSetting=function(t){return this.headDetails.getMetaValue(\"turbolinks-\"+t)},t}()}.call(this),function(){var t=[].slice;e.Renderer=function(){function e(){}var r;return e.render=function(){var e,r,n,o;return n=arguments[0],r=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],o=function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(this,e,function(){}),o.delegate=n,o.render(r),o},e.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(t){var e;return\"false\"===t.getAttribute(\"data-turbolinks-eval\")?t:(e=document.createElement(\"script\"),e.textContent=t.textContent,e.async=!1,r(e,t),e)},r=function(t,e){var r,n,o,i,s,a,u;for(i=e.attributes,a=[],r=0,n=i.length;n>r;r++)s=i[r],o=s.name,u=s.value,a.push(t.setAttribute(o,u));return a},e}()}.call(this),function(){var t,r,n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.SnapshotRenderer=function(e){function o(t,e,r){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(o,e),o.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var t;return t=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var t,e,r,n,o;for(n=this.getNewHeadStylesheetElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.copyNewHeadScriptElements=function(){var t,e,r,n,o;for(n=this.getNewHeadScriptElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getCurrentHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.removeChild(t));return o},o.prototype.copyNewHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getNewHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var e,n,o,i,s,a,u;for(a=this.getCurrentBodyPermanentElements(),u=[],e=0,n=a.length;n>e;e++)i=a[e],s=t(i),o=this.newSnapshot.getPermanentElementById(i.id),r(i,s.element),r(o,i),u.push(s);return u},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(t){var e,n,o,i,s,a,u;for(u=[],o=0,i=t.length;i>o;o++)a=t[o],n=a.element,s=a.permanentElement,e=s.cloneNode(!0),u.push(r(n,e));return u},o.prototype.activateNewBodyScriptElements=function(){var t,e,n,o,i,s;for(i=this.getNewBodyScriptElements(),s=[],e=0,o=i.length;o>e;e++)n=i[e],t=this.createScriptElement(n),s.push(r(n,t));return s},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.newSnapshot.findFirstAutofocusableElement())?t.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll(\"script\")},o}(e.Renderer),t=function(t){var e;return e=document.createElement(\"meta\"),e.setAttribute(\"name\",\"turbolinks-permanent-placeholder\"),e.setAttribute(\"content\",t.id),{element:e,permanentElement:t}},r=function(t,e){var r;return(r=t.parentNode)?r.replaceChild(e,t):void 0}}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.ErrorRenderer=function(e){function r(t){var e;e=document.createElement(\"html\"),e.innerHTML=t,this.newHead=e.querySelector(\"head\"),this.newBody=e.querySelector(\"body\")}return t(r,e),r.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceHeadAndBody(),e.activateBodyScriptElements(),t()}}(this))},r.prototype.replaceHeadAndBody=function(){var t,e;return e=document.head,t=document.body,e.parentNode.replaceChild(this.newHead,e),t.parentNode.replaceChild(this.newBody,t)},r.prototype.activateBodyScriptElements=function(){var t,e,r,n,o,i;for(n=this.getScriptElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},r.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll(\"script\")},r}(e.Renderer)}.call(this),function(){e.View=function(){function t(t){this.delegate=t,this.htmlElement=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return e.Snapshot.fromHTMLElement(this.htmlElement)},t.prototype.render=function(t,e){var r,n,o;return o=t.snapshot,r=t.error,n=t.isPreview,this.markAsPreview(n),null!=o?this.renderSnapshot(o,n,e):this.renderError(r,e)},t.prototype.markAsPreview=function(t){return t?this.htmlElement.setAttribute(\"data-turbolinks-preview\",\"\"):this.htmlElement.removeAttribute(\"data-turbolinks-preview\")},t.prototype.renderSnapshot=function(t,r,n){return e.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),e.Snapshot.wrap(t),r)},t.prototype.renderError=function(t,r){return e.ErrorRenderer.render(this.delegate,r,t)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ScrollManager=function(){function r(r){this.delegate=r,this.onScroll=t(this.onScroll,this),this.onScroll=e.throttle(this.onScroll)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"scroll\",this.onScroll,!1),this.onScroll(),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"scroll\",this.onScroll,!1),this.started=!1):void 0},r.prototype.scrollToElement=function(t){return t.scrollIntoView()},r.prototype.scrollToPosition=function(t){var e,r;return e=t.x,r=t.y,window.scrollTo(e,r)},r.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},r.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},r}()}.call(this),function(){e.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var r;return t.prototype.has=function(t){var e;return e=r(t),e in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=r(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=r(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=r(t),e=this.keys.indexOf(n),e>-1&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,r,n,o;for(n=this.keys.splice(this.size),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(delete this.snapshots[e]);return o},r=function(t){return e.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Visit=function(){function r(r,n,o){this.controller=r,this.action=o,this.performScroll=t(this.performScroll,this),this.identifier=e.uuid(),this.location=e.Location.wrap(n),this.adapter=this.controller.adapter,this.state=\"initialized\",this.timingMetrics={}}var n;return r.prototype.start=function(){return\"initialized\"===this.state?(this.recordTimingMetric(\"visitStart\"),this.state=\"started\",this.adapter.visitStarted(this)):void 0},r.prototype.cancel=function(){var t;return\"started\"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state=\"canceled\"):void 0},r.prototype.complete=function(){var t;return\"started\"===this.state?(this.recordTimingMetric(\"visitEnd\"),this.state=\"completed\",\"function\"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},r.prototype.fail=function(){var t;return\"started\"===this.state?(this.state=\"failed\",\"function\"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},r.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?\"replace\":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},r.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new e.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},r.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||\"restore\"!==this.action&&!t.isPreviewable()?void 0:t},r.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},r.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var r;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),\"function\"==typeof(r=this.adapter).visitRendered&&r.visitRendered(this),t?void 0:this.complete()})):void 0},r.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),\"function\"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),\"function\"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},r.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},r.prototype.requestStarted=function(){var t;return this.recordTimingMetric(\"requestStart\"),\"function\"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},r.prototype.requestProgressed=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},r.prototype.requestCompletedWithResponse=function(t,r){return this.response=t,null!=r&&(this.redirectedToLocation=e.Location.wrap(r)),this.adapter.visitRequestCompleted(this)},r.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},r.prototype.requestFinished=function(){var t;return this.recordTimingMetric(\"requestEnd\"),\"function\"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},r.prototype.performScroll=function(){return this.scrolled?void 0:(\"restore\"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},r.prototype.scrollToRestoredPosition=function(){var t,e;return t=null!=(e=this.restorationData)?e.scrollPosition:void 0,null!=t?(this.controller.scrollToPosition(t),!0):void 0},r.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},r.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},r.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},r.prototype.getTimingMetrics=function(){return e.copyObject(this.timingMetrics)},n=function(t){switch(t){case\"replace\":return\"replaceHistoryWithLocationAndRestorationIdentifier\";case\"advance\":case\"restore\":return\"pushHistoryWithLocationAndRestorationIdentifier\"}},r.prototype.shouldIssueRequest=function(){return\"restore\"===this.action?!this.hasCachedSnapshot():!0},r.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},r.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},r.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Controller=function(){function r(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new e.History(this),this.view=new e.View(this),this.scrollManager=new e.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return r.prototype.start=function(){return e.supported&&!this.started?(addEventListener(\"click\",this.clickCaptured,!0),addEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},r.prototype.disable=function(){return this.enabled=!1},r.prototype.stop=function(){return this.started?(removeEventListener(\"click\",this.clickCaptured,!0),removeEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},r.prototype.clearCache=function(){return this.cache=new e.SnapshotCache(10)},r.prototype.visit=function(t,r){var n,o;return null==r&&(r={}),t=e.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(o=r.action)?o:\"advance\",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},r.prototype.startVisitToLocationWithAction=function(t,r,n){var o;return e.supported?(o=this.getRestorationDataForIdentifier(n),this.startVisit(t,r,{restorationData:o})):window.location=t},r.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},r.prototype.startHistory=function(){return this.location=e.Location.wrap(window.location),this.restorationIdentifier=e.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.stopHistory=function(){return this.history.stop()},r.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},r.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,r){var n;return this.restorationIdentifier=r,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,\"restore\",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=e.Location.wrap(t)):this.adapter.pageInvalidated()},r.prototype.getCachedSnapshotForLocation=function(t){var e;return null!=(e=this.cache.get(t))?e.clone():void 0},r.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable();\n},r.prototype.cacheSnapshot=function(){var t,r;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),r=this.view.getSnapshot(),t=this.lastRenderedLocation,e.defer(function(e){return function(){return e.cache.put(t,r.clone())}}(this))):void 0},r.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},r.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},r.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},r.prototype.scrollPositionChanged=function(t){var e;return e=this.getCurrentRestorationData(),e.scrollPosition=t},r.prototype.render=function(t,e){return this.view.render(t,e)},r.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},r.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},r.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},r.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},r.prototype.clickCaptured=function(){return removeEventListener(\"click\",this.clickBubbled,!1),addEventListener(\"click\",this.clickBubbled,!1)},r.prototype.clickBubbled=function(t){var e,r,n;return this.enabled&&this.clickEventIsSignificant(t)&&(r=this.getVisitableLinkForNode(t.target))&&(n=this.getVisitableLocationForLink(r))&&this.applicationAllowsFollowingLinkToLocation(r,n)?(t.preventDefault(),e=this.getActionForLink(r),this.visit(n,{action:e})):void 0},r.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){var r;return r=this.notifyApplicationAfterClickingLinkToLocation(t,e),!r.defaultPrevented},r.prototype.applicationAllowsVisitingLocation=function(t){var e;return e=this.notifyApplicationBeforeVisitingLocation(t),!e.defaultPrevented},r.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,r){return e.dispatch(\"turbolinks:click\",{target:t,data:{url:r.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationBeforeVisitingLocation=function(t){return e.dispatch(\"turbolinks:before-visit\",{data:{url:t.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationAfterVisitingLocation=function(t){return e.dispatch(\"turbolinks:visit\",{data:{url:t.absoluteURL}})},r.prototype.notifyApplicationBeforeCachingSnapshot=function(){return e.dispatch(\"turbolinks:before-cache\")},r.prototype.notifyApplicationBeforeRender=function(t){return e.dispatch(\"turbolinks:before-render\",{data:{newBody:t}})},r.prototype.notifyApplicationAfterRender=function(){return e.dispatch(\"turbolinks:render\")},r.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),e.dispatch(\"turbolinks:load\",{data:{url:this.location.absoluteURL,timing:t}})},r.prototype.startVisit=function(t,e,r){var n;return null!=(n=this.currentVisit)&&n.cancel(),this.currentVisit=this.createVisit(t,e,r),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},r.prototype.createVisit=function(t,r,n){var o,i,s,a,u;return i=null!=n?n:{},a=i.restorationIdentifier,s=i.restorationData,o=i.historyChanged,u=new e.Visit(this,t,r),u.restorationIdentifier=null!=a?a:e.uuid(),u.restorationData=e.copyObject(s),u.historyChanged=o,u.referrer=this.location,u},r.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},r.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},r.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?e.closest(t,\"a[href]:not([target]):not([download])\"):void 0},r.prototype.getVisitableLocationForLink=function(t){var r;return r=new e.Location(t.getAttribute(\"href\")),this.locationIsVisitable(r)?r:void 0},r.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute(\"data-turbolinks-action\"))?e:\"advance\"},r.prototype.nodeIsVisitable=function(t){var r;return(r=e.closest(t,\"[data-turbolinks]\"))?\"false\"!==r.getAttribute(\"data-turbolinks\"):!0},r.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},r.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},r.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},r}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute(\"data-turbolinks-suppress-warning\"))for(;t=t.parentNode;)if(t===document.body)return console.warn(\"You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\\n\\nLoad your application\\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\\n\\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\\n\\n\\u2014\\u2014\\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s\",e.outerHTML)}()}.call(this),function(){var t,r,n;e.start=function(){return r()?(null==e.controller&&(e.controller=t()),e.controller.start()):void 0},r=function(){return null==window.Turbolinks&&(window.Turbolinks=e),n()},t=function(){var t;return t=new e.Controller,t.adapter=new e.BrowserAdapter(t),t},n=function(){return window.Turbolinks===e},n()&&e.start()}.call(this)}).call(this),\"object\"==typeof module&&module.exports?module.exports=e:\"function\"==typeof define&&define.amd&&define(e)}).call(this);","var map = {\n\t\"./hello_controller.js\": 3\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2;","// hello_controller.js\nimport { Controller } from \"stimulus\"\n\nexport default class extends Controller {\n  static targets = [ \"name\", \"output\" ]\n\n  greet() {\n    console.log('hi')\n    this.outputTarget.textContent =\n      `Hello, ${this.nameTarget.value}!`\n  }\n}\n","import Turbolinks from 'turbolinks';\nTurbolinks.start();\n\nimport { Application } from \"stimulus\"\nimport { definitionsFromContext } from \"stimulus/webpack-helpers\"\n\nconst application = Application.start()\nconst context = require.context(\"./controllers\", true, /\\.js$/)\napplication.load(definitionsFromContext(context))\n","export function definitionsFromContext(context) {\n    return context.keys()\n        .map(function (key) { return definitionForModuleWithContextAndKey(context, key); })\n        .filter(function (value) { return value; });\n}\nfunction definitionForModuleWithContextAndKey(context, key) {\n    var identifier = identifierForContextKey(key);\n    if (identifier) {\n        return definitionForModuleAndIdentifier(context(key), identifier);\n    }\n}\nfunction definitionForModuleAndIdentifier(module, identifier) {\n    var controllerConstructor = module.default;\n    if (typeof controllerConstructor == \"function\") {\n        return { identifier: identifier, controllerConstructor: controllerConstructor };\n    }\n}\nexport function identifierForContextKey(key) {\n    var logicalName = (key.match(/^(?:\\.\\/)?(.+)(?:[_-]controller\\..+?)$/) || [])[1];\n    if (logicalName) {\n        return logicalName.replace(/_/g, \"-\").replace(/\\//g, \"--\");\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxNQUFNLGlDQUFpQyxPQUEwQztJQUMvRSxPQUFPLE9BQU8sQ0FBQyxJQUFJLEVBQUU7U0FDbEIsR0FBRyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsb0NBQW9DLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFsRCxDQUFrRCxDQUFDO1NBQzlELE1BQU0sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLEtBQUssRUFBTCxDQUFLLENBQWlCLENBQUE7QUFDM0MsQ0FBQztBQUVELDhDQUE4QyxPQUEwQyxFQUFFLEdBQVc7SUFDbkcsSUFBTSxVQUFVLEdBQUcsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDL0MsSUFBSSxVQUFVLEVBQUU7UUFDZCxPQUFPLGdDQUFnQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQTtLQUNsRTtBQUNILENBQUM7QUFFRCwwQ0FBMEMsTUFBd0IsRUFBRSxVQUFrQjtJQUNwRixJQUFNLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUE7SUFDNUMsSUFBSSxPQUFPLHFCQUFxQixJQUFJLFVBQVUsRUFBRTtRQUM5QyxPQUFPLEVBQUUsVUFBVSxZQUFBLEVBQUUscUJBQXFCLHVCQUFBLEVBQUUsQ0FBQTtLQUM3QztBQUNILENBQUM7QUFFRCxNQUFNLGtDQUFrQyxHQUFXO0lBQ2pELElBQU0sV0FBVyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2xGLElBQUksV0FBVyxFQUFFO1FBQ2YsT0FBTyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0tBQzNEO0FBQ0gsQ0FBQyJ9"],"sourceRoot":""}